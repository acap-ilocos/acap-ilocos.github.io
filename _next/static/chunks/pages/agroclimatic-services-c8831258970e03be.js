(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6603],{67741:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agroclimatic-services",function(){return t(66163)}])},43370:function(e,n,t){"use strict";var i=t(85893),r=t(9008),o=t(47426);n.Z=function(e){var n=e.title,t=e.ogDescription,l=e.ogImageURL,a=e.ogImgAlt,s=void 0===a?"Picture":a,c=e.ogSiteName,u=void 0===c?"ACAP-".concat(o.Gt.toUpperCase()):c,p=e.ogURL,d=e.canonicalURL,f=void 0===d?"http://localhost":d;return(0,i.jsxs)(r.default,{children:[(0,i.jsx)("meta",{name:"description",content:t}),(0,i.jsx)("meta",{rel:"canonical",href:f}),(0,i.jsx)("meta",{name:"og:description",content:t}),(0,i.jsx)("meta",{property:"og:title",content:n}),(0,i.jsx)("meta",{property:"og:site_name",content:u}),(0,i.jsx)("meta",{property:"og:image",content:l}),(0,i.jsx)("meta",{property:"og:image:width",content:"600"}),(0,i.jsx)("meta",{property:"og:image:height",content:"315"}),(0,i.jsx)("meta",{property:"og:image:alt",content:s}),(0,i.jsx)("meta",{property:"og:url",content:p}),(0,i.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("meta",{name:"twitter:title",content:n}),(0,i.jsx)("meta",{name:"twitter:image",content:l}),(0,i.jsx)("title",{children:n})]})}},11829:function(e,n,t){"use strict";var i=t(85893),r=t(55113);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n.Z=function(e){return(0,i.jsx)(r.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){o(e,n,t[n])}))}return e}({},e,{elevation:15}))}},11427:function(e,n,t){"use strict";var i=t(85893),r=t(55113);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var l=(0,t(11496).ZP)((function(e){return(0,i.jsx)(r.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){o(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{padding:n.spacing(3),borderRadius:n.spacing(1),boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"}}));n.Z=l},66163:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSG:function(){return ce},default:function(){return ue}});var i=t(34051),r=t.n(i),o=t(85893),l=t(67294),a=t(16327),s=t(11427),c=t(47426),u=t(59111),p=t(25675),d=t(45697),f=t.n(d),m=t(61903),v=t(76295),g=t(87357),x=t(11057),h=t(56863),b=t(67720),y=t(15861),_=t(86886),j=t(11829),O=t(26613),Z={container:{display:"flex",flexDirection:"column"},cardContainer:{display:{xs:"none",md:"grid"},"& h6":{fontSize:"1.2rem",lineHeight:"1.6rem"},"& h6:nth-child(2)":{fontWeight:"bold"},placeContent:"center",width:"100%",maxWidth:"430px",minHeight:"85px",border:"2px solid #cc00cc",borderRadius:"40px",padding:function(e){return e.spacing(2)},margin:"auto",marginBottom:"6px",marginTop:"6px",textAlign:"center",boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px !important"},arrowIcon:{margin:"auto",color:"#cc00cc",display:{xs:"none",md:"block"}}};var S=function(e){var n=e.info,t=e.show,i=void 0===t||t,r=e.borderColor,l=void 0===r?"#cc00cc":r;return(0,o.jsxs)(g.Z,{sx:Z.container,children:[(0,o.jsxs)(g.Z,{sx:Z.cardContainer,style:{borderColor:l},children:[(0,o.jsx)(y.Z,{variant:"subtitle1",children:"You have selected ".concat("cropstage"===n.from?"crop stage":n.from)}),(0,o.jsx)(y.Z,{variant:"subtitle1",children:n.label})]}),i&&(0,o.jsx)(O.Z,{size:24,sx:Z.arrowIcon,style:{color:l}})]})},w=t(87918),C=t(37634);function P(e){var n=e.impactOutlookOnly,t=e.recommendations,i=void 0===t?[]:t,r=e.title,a=void 0===r?"":r,s=e.titleFontSize,c=void 0===s?"h5":s,u=e.recommendationsEng,p=void 0===u?"management_recommendations_english":u,d=e.recommendationsTag,f=void 0===d?"management_recommendations_tagalog":d,m=e.impactOutlookEng,v=void 0===m?"impact_outlook_english":m,g=e.impactOutlookTag,x=void 0===g?"impact_outlook_tagalog":g,h=e.isTagalog,b=void 0===h?null:h,_=e.isShowTitle,j=void 0===_||_,O=e.isShowImpactOutlookSubtitle,Z=void 0===O||O,S=(0,l.useState)(!0),P=S[0],k=S[1];return(0,l.useEffect)((function(){null!==b&&k(!b)}),[b]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",marginBottom:"20px"},children:[j&&(0,o.jsx)("div",{style:{flexGrow:1},children:(0,o.jsxs)(y.Z,{variant:c,children:[a," Recommendations"]})}),null===b&&(0,o.jsx)(w.Z,{variant:"outlined",size:"small",label:P?"Tagalog":"English",onClick:function(){return k((function(e){return!e}))},className:"toggleButton"})]}),i.length>0?(0,o.jsxs)("div",{children:[(0,o.jsx)(o.Fragment,{children:n&&(0,o.jsxs)("div",{children:[Z&&(0,o.jsx)(y.Z,{variant:"subtitle1",children:"Impact Outlooks"}),i.map((function(e,n){return(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:P?e[v]||"No Impact Outlook":e[x]||"Walang makitang impak awtluk"}},n)})),(0,o.jsx)("br",{})]})}),Z&&(0,o.jsxs)(o.Fragment,{children:[j&&(0,o.jsx)(y.Z,{variant:"subtitle1",children:"Recommendations"}),i.map((function(e,n){return(0,o.jsx)("div",{dangerouslySetInnerHTML:{__html:P?e[p]||"No Recommendations":e[f]||"Walang makitang rekomendasyon"}},n)}))]})]}):(0,o.jsx)(C.Z,{message:"We cannot find recommendations for your selected options."})]})}P.propTypes={recommendations:f().array,title:f().string,subtitle:f().string,titleFontSize:f().string,recommendationsEng:f().string,recommendationsTag:f().string,isTagalog:f().bool,isShowTitle:f().bool};var k=P,E=t(26660),R=t(41664),T={container:{marginTop:function(e){return e.spacing(3)},minHeight:"400px"},controls:{marginTop:function(e){return e.spacing(6)}},selectContainer:{borderRight:{sm:"none",md:"1px solid gray"}},recsContainer:{marginTop:"-24px",paddingLeft:{sm:"none",md:"54px !important"},"& .toggleButton":{float:"right",width:"80px"}},autocomplete:{maxWidth:{xs:"100%",md:"300px"},paddingTop:function(e){return e.spacing(2)}},conditionLegend:{maxWidth:{sm:"100%"},margin:{md:"24px"},marginBottom:"32px",padding:function(e){return e.spacing(1)},borderRadius:"4px",border:"1px solid grey",textAlign:"center"},welcome:{display:"grid",placeContent:"center",marginTop:function(e){return e.spacing(10)},textAlign:"center","& h5":{marginTop:function(e){return e.spacing(2)}}}};function D(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){D(e,n,t[n])}))}return e}var L=["sel_province","sel_municipality","sel_crop","sel_stage","sel_activity"];function A(e){var n,t,i,r,a=(0,l.useState)(!1),s=a[0],c=a[1],u=e.sel_options,d=e.climateRisk,f=e.seasonalMonths,O=e.optsprovinces,Z=e.optsmunicipalities,w=e.optscrops,C=e.optsmonths,P=e.optscropstages,D=e.optsactivities,A=e.onSelectItemChange,W=e.onResetClick,N=e.recommendations,M=e.loading;(0,l.useEffect)((function(){null===u.sel_activity&&!0===s&&c(!1)}),[u.sel_activity,s]);var z=function(){var e="Loading...";return O.length>0&&(e=null===u.sel_province?"Select a province":"Province"),e};return(0,o.jsxs)(g.Z,{sx:{minHeight:"75vh"},id:"contents-seasonal-recommendations",children:[(0,o.jsx)(y.Z,{variant:"h4",children:"Seasonal Recommendations"}),(0,o.jsx)(y.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,o.jsxs)(_.ZP,{container:!0,spacing:2,sx:T.container,children:[(0,o.jsxs)(_.ZP,{item:!0,xs:12,md:4,sx:T.selectContainer,children:[(0,o.jsxs)(g.Z,{sx:{paddingRight:function(e){return e.spacing(2)},wdith:"100%"},children:[(0,o.jsx)(v.Z,{disablePortal:!0,id:"province",value:u.sel_province,disabled:0===O.length||M,options:O,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,I({},e,{label:z()}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){return A(e,I({},n,{from:"province"}))}}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"municipality",value:u.sel_municipality,disabled:0===Z.length||M,options:Z,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,I({},e,{label:null===u.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},onChange:function(e,n){return A(e,I({},n,{from:"municipality"}))}}),u.sel_municipality&&(0,o.jsxs)(g.Z,{sx:{mt:2},children:[(0,o.jsx)(y.Z,{align:"center",variant:"body1",children:(0,o.jsx)("strong",{children:"Seasonal Forecast Duration:"})}),(0,o.jsxs)(y.Z,{align:"center",variant:"body1",children:[null===(n=f[0])||void 0===n?void 0:n.label," to ",null===(t=f[5])||void 0===t?void 0:t.label]})]}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"crop",value:u.sel_crop,disabled:0===w.length||M||null===u.sel_municipality,options:w,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,I({},e,{label:null===u.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return A(e,I({},n,{from:"crop"}))}}),0===P.length&&null!==u.sel_crop&&!M&&(0,o.jsxs)("div",{children:[(0,o.jsx)(y.Z,{variant:"caption",color:"orange",children:(0,o.jsxs)("strong",{children:["No crop stages for this seasonal range for ",u.sel_crop,"."]})}),(0,o.jsx)("br",{}),(0,o.jsxs)(y.Z,{variant:"caption",children:["See\xa0",(0,o.jsx)(R.default,{href:"/cropping-calendar-v2",passHref:!0,children:(0,o.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"cropstage",value:u.sel_stage,disabled:0===P.length||M,options:P,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,I({},e,{label:null===u.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return A(e,I({},n,{from:"cropstage"}))}}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"activity",value:u.sel_activity,disabled:0===D.length||M,options:D,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,I({},e,{label:null===u.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){A(e,I({},n,{from:"activity"})),c(!1)}}),(0,o.jsx)("div",{children:""!==u.error?(0,o.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:u.error}):(0,o.jsx)("div",{children:"\xa0"})}),(0,o.jsxs)(h.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,o.jsx)(x.Z,{size:"medium",disabled:M,onClick:W,children:"Clear"}),(0,o.jsx)(x.Z,{size:"medium",variant:"contained",onClick:function(){return c((function(e){return!e}))},disabled:null===u.sel_activity||s,children:"Finish"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)(b.Z,{}),(0,o.jsx)("br",{}),""!==d&&C.length>0&&(0,o.jsxs)(g.Z,{sx:T.conditionLegend,children:[(0,o.jsxs)(y.Z,{variant:"body2",children:["Climate Risk for the season ",(0,o.jsx)("strong",{children:null===(i=C[0])||void 0===i?void 0:i.label})," to ",(0,o.jsx)("strong",{children:null===(r=C[5])||void 0===r?void 0:r.label}),":"]}),(0,o.jsx)("div",{children:d})]})]}),(0,o.jsx)(_.ZP,{item:!0,xs:12,md:8,sx:T.recsContainer,children:null!==u.sel_crop&&null!==u.sel_activity&&s?(0,o.jsx)(k,{impactOutlookOnly:!0,title:u.sel_crop,recommendations:N}):Object.values(u).filter((function(e){return e})).length>1?(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:L.map((function(e,n){var t,i,r={from:e.slice(e.indexOf("_")+1),label:["sel_stage"].includes(e)?null!==(i=null===(t=u[e])||void 0===t?void 0:t.label)&&void 0!==i?i:"":u[e]};return null!==u[e]&&void 0!==u[e]?(0,o.jsx)(S,{info:r,show:n<L.length-1},"card-opt-".concat(n)):(0,o.jsx)("div",{},"card-opt-".concat(n))}))}):(0,o.jsxs)(g.Z,{sx:T.welcome,children:[(0,o.jsx)(p.default,{unoptimized:!0,src:(0,E.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:E.imageLoader,alt:"Empty data"}),(0,o.jsx)(y.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,o.jsx)(y.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}A.propTypes={sel_options:f().object,optsprovinces:f().array,optsmunicipalities:f().array,optscrops:f().array,optsmonths:f().array,optscropstages:f().array,optsactivities:f().array,seasonalMonths:f().array,recommendations:f().array,loading:f().bool,onSelectItemChange:f().func,onResetClick:f().func};var W=A,N=t(30560),M=t(23766),z=t(59390),U=t(38885),V=t(22856),q=t(87682),F=t(52955);function H(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){H(e,n,t[n])}))}return e}var G={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_condition:{id:0,from:"weather_condition",label:c.MW.WAY_BELOW_NORMAL.label},loading:!1,error:""};var X=function(e){var n,t,i=e.provinces,r=void 0===i?[]:i,a=(0,l.useState)(G),s=a[0],p=a[1],d=(0,l.useState)([]),f=d[0],m=d[1],v=(0,l.useState)({}),g=v[0],x=v[1],h=(0,l.useState)([]),b=h[0],y=h[1],_=(0,l.useState)([]),j=_[0],O=_[1],Z=(0,l.useState)([]),S=Z[0],w=Z[1],C=(0,l.useState)(!0),P=C[0],k=C[1],E=(0,l.useRef)(!1),R=(0,U.Z)().cropList.map((function(e,n){return{disabled:!1,label:e,id:n}})),T=(0,q.m$)(N.M.WEATHER_FORECASTS,"ilocos",N.M.SUB_SEASONAL,"name"),D=T.documents,I=T.loading,L=(0,z.Z)(s.sel_province,s.sel_crop),A=L.cropcalendar,H=L.cropStages,X=L.loading,J=(0,V.Z)(g.code,null!==(t=null===(n=s.sel_stage)||void 0===n?void 0:n.code)&&void 0!==t?t:null,s.sel_crop,"seasonal"),Y=J.recommendations,$=J.farmoperations,Q=J.loading,K=(0,M.Z)(s.sel_province,r);return(0,l.useEffect)((function(){if(0!==A.length&&!P&&0!==f.length&&null!==s.sel_municipality){var e=[];Object.values(A).map((function(n){var t=n.find((function(e){return e.municipality===s.sel_municipality&&e.crop===s.sel_crop}));f.forEach((function(n){var i;if(t){var r=null===(i=t[n.id])||void 0===i?void 0:i.split(",");r&&2===(null===r||void 0===r?void 0:r.length)&&("none"===r[0]||e.includes(r[0])||e.push(r[0]),"none"===r[1]||e.includes(r[1])||e.push(r[1]))}}))}));var n=e.map((function(e,n){return{id:n,label:H[e].label,code:e}}));w(n)}}),[A,P,s.sel_crop,s.sel_municipality,f,H]),(0,l.useEffect)((function(){return E.current=!0,function(){E.current=!1}}),[]),(0,l.useEffect)((function(){if(r.length>0&&D.length>0&&!I){O((0,u.m)(r));var e=D[0].mos.reduce((function(e,n){return e.push({id:c.re[n.toUpperCase()].code,label:c.re[n.toUpperCase()].format,disabled:!1}),e}),[]);m(e)}}),[r,D,I]),(0,l.useEffect)((function(){k(I||Q||X)}),[I,Q,X]),(0,o.jsx)(W,{climateRisk:g.label,optsprovinces:j,optsmunicipalities:K,optscrops:R,optsmonths:f,optscropstages:S,optsactivities:$,sel_options:s,recommendations:b,loading:P,seasonalMonths:f,onSelectItemChange:function(e,n){var t=n.from,i=n.label;if(b.length>0&&y([]),Object.keys(n).includes("id"))switch(t){case"province":w([]);var r=D.find((function(e){return e.name===i}));x((0,F.Z)(r.months,"seasonal")),p(B({},G,{sel_province:i}));break;case"municipality":w([]),p(B({},s,{sel_municipality:i,sel_crop:null,sel_stage:null,sel_activity:null}));break;case"crop":p(B({},s,{sel_crop:i,sel_stage:null,sel_activity:null}));break;case"cropstage":p(B({},s,{sel_stage:n,sel_activity:null}));break;case"activity":var o=Y.filter((function(e){return e.crop_stage===s.sel_stage.code&&e.farming_activity===i}));y(o),p(B({},s,{sel_activity:i}))}else"province"===t?(p(G),w([])):"municipality"===t?(p(B({},s,{sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null})),w([])):"crop"===t?(p(B({},s,{sel_crop:null,sel_stage:null,sel_activity:null})),w([])):"cropstage"===t?p(B({},s,{sel_stage:null,sel_activity:null})):"activity"===t&&p(B({},s,{sel_activity:null}))},onResetClick:function(){p(G),w([]),y([])}})};function J(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){J(e,n,t[n])}))}return e}var $=["sel_province","sel_municipality","sel_day","sel_crop","sel_month","sel_stage","sel_activity"];function Q(e){var n,t,i=(0,l.useState)(!1),r=i[0],a=i[1],s=e.sel_options,u=e.loading,d=e.recommendations,f=e.weathertoday,O=e.warning,Z=e.climateRisk,w=e.optsprovinces,C=e.optsmunicipalities,P=e.optsdays,D=e.optscrops,I=e.optscropstages,L=e.optsactivities,A=e.onSelectItemChange,W=e.onResetClick;(0,l.useEffect)((function(){null===s.sel_activity&&!0===r&&a(!1)}),[s.sel_activity,r]);var N=function(){var e="Loading...";return w.length>0&&(e=null===s.sel_province?"Select a province":"Province"),e};return(0,o.jsxs)(g.Z,{sx:{minHeight:"75vh"},id:"contents-tenday-recommendations",children:[(0,o.jsx)(y.Z,{variant:"h4",children:"10-Day Farm Weather Outlook and Advisory Recommendations"}),(0,o.jsx)(y.Z,{variant:"subtitle1",children:"Crop Recommendations"}),(0,o.jsxs)(_.ZP,{container:!0,spacing:2,sx:T.container,children:[(0,o.jsxs)(_.ZP,{item:!0,xs:12,md:4,sx:T.selectContainer,children:[(0,o.jsxs)(g.Z,{sx:{minWidth:"100%",paddingRight:function(e){return e.spacing(2)}},children:[(0,o.jsx)(v.Z,{disablePortal:!0,id:"province",value:s.sel_province,disabled:0===w.length||u,options:w,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,Y({},e,{label:N()}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){return A(e,Y({},n,{from:"province"}))}}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"municipality",value:s.sel_municipality,disabled:0===C.length||u,options:C,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,Y({},e,{label:null===s.sel_municipality?"Select a municipality":"Municipality"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},onChange:function(e,n){return A(e,Y({},n,{from:"municipality"}))}}),s.sel_municipality&&(0,o.jsxs)(g.Z,{sx:{mt:2},children:[(0,o.jsx)(y.Z,{align:"center",variant:"body1",children:(0,o.jsx)("strong",{children:"Forecast Duration:"})}),(0,o.jsxs)(y.Z,{align:"center",variant:"body1",children:[null===(n=P[0])||void 0===n?void 0:n.label," to ",null===(t=P[9])||void 0===t?void 0:t.label]})]}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"crop",value:s.sel_crop,disabled:0===D.length||null===s.sel_municipality||u,options:D,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,Y({},e,{label:null===s.sel_crop?"Select a crop type":"Crop"}))},isOptionEqualToValue:function(e,n){return e.label===n},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return A(e,Y({},n,{from:"crop"}))}}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"cropstage",value:s.sel_stage,disabled:0===I.length||u,options:I,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,Y({},e,{label:null===s.sel_stage?"Select a crop stage":"Crop Stage"}))},isOptionEqualToValue:function(e,n){return e.label===n.label},getOptionDisabled:function(e){return e.disabled},onChange:function(e,n){return A(e,Y({},n,{from:"cropstage"}))}}),0===I.length&&null!==s.sel_crop&&(0,o.jsxs)("div",{children:[(0,o.jsx)(y.Z,{variant:"caption",color:"orange",children:(0,o.jsxs)("strong",{children:["No crop stages for this ten day range for ",s.sel_crop,"."]})}),(0,o.jsx)("br",{}),(0,o.jsxs)(y.Z,{variant:"caption",children:["See\xa0",(0,o.jsx)(R.default,{href:"/cropping-calendar-v2",passHref:!0,children:(0,o.jsx)("a",{style:{color:"orange",fontWeight:600},target:"_blank",children:"Cropping Calendar"})}),"\xa0for reference."]})]}),(0,o.jsx)(v.Z,{disablePortal:!0,id:"activity",value:s.sel_activity,disabled:0===L.length||u,options:L,sx:T.autocomplete,PaperComponent:j.Z,renderInput:function(e){return(0,o.jsx)(m.Z,Y({},e,{label:null===s.sel_activity?"Select an activity":"Activity"}))},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){A(e,Y({},n,{from:"activity"})),a(!1)}}),(0,o.jsx)("div",{children:""!==s.error||""!==O?(0,o.jsx)("div",{style:{color:"red",fontSize:"12px",marginTop:"8px"},children:s.error||O}):(0,o.jsx)("div",{children:"\xa0"})}),(0,o.jsxs)(h.Z,{variant:"text",disableElevation:!0,sx:{width:"300px",margin:"auto",marginTop:"16px"},children:[(0,o.jsx)(x.Z,{size:"medium",onClick:W,children:"Clear"}),(0,o.jsx)(x.Z,{size:"medium",variant:"contained",onClick:function(){return a((function(e){return!e}))},disabled:null===s.sel_activity||r,children:"Finish"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)(b.Z,{}),(0,o.jsx)("br",{}),null!==f&&(0,o.jsxs)(g.Z,{sx:T.conditionLegend,style:{backgroundColor:c.tN[f.code],color:[c.MW.ABOVE_NORMAL.label,c.MW.WAY_BELOW_NORMAL.label].includes(f.code)?"#fff":"#000"},children:[(0,o.jsx)(y.Z,{variant:"subtitle2",children:"Rainfall Intensity for the Day"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{children:f.label_full}),(0,o.jsx)("br",{}),(0,o.jsx)("span",{children:f.rainfall})]})]}),""!==Z&&(0,o.jsxs)(g.Z,{sx:T.conditionLegend,children:[(0,o.jsx)(y.Z,{variant:"subtitle2",children:"Climate Risk:"}),(0,o.jsx)("div",{children:Z})]})]}),(0,o.jsx)(_.ZP,{item:!0,xs:12,md:8,sx:T.recsContainer,children:null!==s.sel_crop&&null!==s.sel_activity&&r?(0,o.jsx)(k,{impactOutlookOnly:!0,title:s.sel_crop,recommendations:d}):Object.values(s).filter((function(e){return e})).length>1?(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:$.map((function(e,n){var t,i,r={from:e.slice(e.indexOf("_")+1),label:["sel_day","sel_stage"].includes(e)?null!==(i=null===(t=s[e])||void 0===t?void 0:t.label)&&void 0!==i?i:"":s[e]};return null!==s[e]&&void 0!==s[e]?(0,o.jsx)(S,{info:r,show:n<$.length-1,borderColor:"blue"},"card-opt-".concat(n)):(0,o.jsx)("div",{},"card-opt-".concat(n))}))}):(0,o.jsxs)(g.Z,{sx:T.welcome,children:[(0,o.jsx)(p.default,{unoptimized:!0,src:(0,E.assetPrefixer)("images/icons/finance.svg"),height:120,width:120,loader:E.imageLoader,alt:"Empty data"}),(0,o.jsx)(y.Z,{variant:"h5",children:"Welcome to the Crop Recommendations Page"}),(0,o.jsx)(y.Z,{variant:"p",children:"Please select a province to start."})]})})]})]})}Q.propTypes={sel_options:f().object,optsprovinces:f().array,optsmunicipalities:f().array,optscrops:f().array,optsdays:f().array,optscropstages:f().array,optsactivities:f().array,recommendations:f().array,weathertoday:f().object,onSelectItemChange:f().func,onClickDateSelector:f().func,onResetClick:f().func};var K=Q,ee=t(94640),ne=t(77715);function te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ie(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){te(e,n,t[n])}))}return e}var re={sel_province:null,sel_municipality:null,sel_crop:null,sel_stage:null,sel_activity:null,sel_month:null,sel_day:null,sel_condition:{id:0,from:"weather_condition",label:null,date:(new Date).toDateString()},loading:!1,error:"",warning:""};var oe=function(e){var n,t,i=e.provinces,r=void 0===i?[]:i,a=(0,l.useState)(re),s=a[0],c=a[1],p=(0,l.useState)({}),d=p[0],f=p[1],m=(0,l.useState)([]),v=m[0],g=m[1],x=(0,l.useState)(null),h=x[0],b=x[1],y=(0,l.useState)([]),_=y[0],j=y[1],O=(0,l.useState)([]),Z=O[0],S=O[1],w=(0,l.useState)(!0),C=w[0],P=w[1],k=(0,l.useRef)(!1),E=(0,U.Z)().cropList.map((function(e,n){return{disabled:!1,label:e,id:n}})),R=(0,M.Z)(s.sel_province,r),T=(0,V.Z)(d.code,null!==(t=null===(n=s.sel_stage)||void 0===n?void 0:n.code)&&void 0!==t?t:null,s.sel_crop,"tenday"),D=T.recommendations,I=T.farmoperations,L=T.loading,A=(0,z.Z)(s.sel_province,s.sel_crop,Z),W=A.cropcalendar,N=A.cropStages,q=A.loading,H=(0,ee.Z)(s.sel_province,s.sel_municipality),B=H.days,G=H.loading,X=H.warning;(0,l.useEffect)((function(){B.length>0&&f((0,F.Z)(B,"tenday"))}),[B]),(0,l.useEffect)((function(){if(B.length>0&&!q&&!L){var e=new Date(B[0].label_full),n=(0,ne.Mn)(e);if(0!==W.length){var t=[];Object.values(W).map((function(e){var i=e.find((function(e){return e.municipality===s.sel_municipality&&e.crop===s.sel_crop}));i&&Object.keys(N).length>0&&Object.keys(n).forEach((function(e){var r=i[e].split(",");n[e].forEach((function(e){"1st_half"===e&&"none"!==r[0]?t.includes(r[0])||t.push(r[0]):"2nd_half"===e&&"none"!==r[1]&&(t.includes(r[1])||t.push(r[1]))}))}))}));var i=t.map((function(e,n){return{id:n,label:N[e].label,code:e}}));S(i)}}}),[N,W,W.length,W.data1,W.data2,B,s.sel_municipality,s.sel_crop,q,L]),(0,l.useEffect)((function(){return k.current=!0,function(){k.current=!1}}),[]),(0,l.useEffect)((function(){r.length>0&&j((0,u.m)(r))}),[r]),(0,l.useEffect)((function(){P(G||L||q)}),[G,L,q]);var J=function(e,n){var t=n.from,i=n.label;if(v.length>0&&g([]),Object.keys(n).includes("id"))switch(t){case"province":S([]),b(null),c(ie({},re,{sel_province:i}));break;case"municipality":S([]),c(ie({},s,{sel_municipality:i,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null}));break;case"day":S([]),b(B.find((function(e){return e.label===i}))),c(ie({},s,{sel_day:n,sel_month:null,sel_crop:null,sel_stage:null,sel_activity:null}));break;case"crop":S([]),c(ie({},s,{sel_crop:i,sel_month:null,sel_stage:null,sel_activity:null}));break;case"cropstage":c(ie({},s,{sel_stage:n,sel_activity:null}));break;case"activity":g(D.filter((function(e){return e.crop_stage===s.sel_stage.code&&e.farming_activity===i}))),c(ie({},s,{sel_activity:i}))}else"province"===t?(c(re),S([])):"municipality"===t?(c(ie({},s,{sel_municipality:null,sel_crop:null,sel_day:null,sel_month:null,sel_stage:null,sel_activity:null})),S([])):"day"===t?(c(ie({},s,{sel_day:null,sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),S([])):"crop"===t?(c(ie({},s,{sel_crop:null,sel_month:null,sel_stage:null,sel_activity:null})),S([])):"cropstage"===t?c(ie({},s,{sel_stage:null,sel_activity:null})):"activity"===t&&c(ie({},s,{sel_activity:null}))};return(0,o.jsx)(K,{climateRisk:d.label,optsprovinces:_,optsmunicipalities:R,optscrops:E,optsdays:B,optscropstages:Z,optsactivities:I,sel_options:s,recommendations:v,weathertoday:h,loading:C,warning:X,onSelectItemChange:J,onClickDateSelector:function(e){var n=new Date(e).toDateString();n=n.substring(0,n.length-5),J(null,{id:n,label:n,full:new Date(e),from:"day"})},onResetClick:function(){c(re),S([]),g([])}})};var le=function(e){var n=e.municipalities,t=void 0===n?[]:n,i=e.provinces,r=void 0===i?[]:i;return(0,o.jsxs)("div",{children:[(0,o.jsx)(s.Z,{sx:{boxShadow:"none"}}),(0,o.jsx)("div",{id:"seasonal-recommendations"}),(0,o.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,o.jsx)(X,{municipalities:t,provinces:r})}),(0,o.jsx)("div",{id:"resilient-practices"}),(0,o.jsx)(s.Z,{sx:{marginTop:"80px",boxShadow:"none"},children:(0,o.jsx)(oe,{provinces:r})})]})},ae=t(43370);function se(e,n,t,i,r,o,l){try{var a=e[o](l),s=a.value}catch(c){return void t(c)}a.done?n(s):Promise.resolve(s).then(i,r)}var ce=!0,ue=function(e){var n=e.media,t=(0,l.useState)([]),i=t[0],s=t[1];return(0,l.useEffect)((function(){var e=function(){var e,n=(e=r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,a.$m)();case 3:n=e.sent,s(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,t=arguments;return new Promise((function(i,r){var o=e.apply(n,t);function l(e){se(o,i,r,l,a,"next",e)}function a(e){se(o,i,r,l,a,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}();e()}),[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(ae.Z,{title:"Agro-Climatic Advisory Portal - ".concat(c.Gt," (ACAP-").concat(c.Gt.toUpperCase(),") Crop Recommendations"),ogDescription:n.description,ogImageURL:n.url,ogURL:n.path,canonicalURL:n.path}),(0,o.jsx)(le,{provinces:i})]})}},23766:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var i=t(67294);function r(e,n){var t=(0,i.useState)([]),r=t[0],o=t[1];return(0,i.useEffect)((function(){var t,i;o(e&&n&&null!==(i=null===(t=n.find((function(n){return n.label===e})))||void 0===t?void 0:t.municipalities)&&void 0!==i?i:[])}),[e,n]),r}},87682:function(e,n,t){"use strict";t.d(n,{ky:function(){return d},m$:function(){return f},tl:function(){return m}});var i=t(34051),r=t.n(i),o=t(67294),l=t(25321),a=t(96772);function s(e,n,t,i,r,o,l){try{var a=e[o](l),s=a.value}catch(c){return void t(c)}a.done?n(s):Promise.resolve(s).then(i,r)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(i,r){var o=e.apply(n,t);function l(e){s(o,i,r,l,a,"next",e)}function a(e){s(o,i,r,l,a,"throw",e)}l(void 0)}))}}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},i=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),i.forEach((function(n){u(e,n,t[n])}))}return e}function d(e,n){var t=(0,o.useState)(null),i=t[0],s=t[1],u=(0,o.useState)(!0),p=u[0],d=u[1],f=(0,o.useState)(""),m=f[0],v=f[1],g=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var t=function(){var t=c(r().mark((function t(){var i,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=(0,l.JU)(a.db,e,n),t.next=4,(0,l.QT)(i);case 4:o=t.sent,g.current&&(o.exists()&&s(o.data()),d(!1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),v(t.t0.message),d(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){return g.current=!1}}),[e,n]),[i,p,m]}function f(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(0,o.useState)([]),u=s[0],d=s[1],f=(0,o.useState)(!0),m=f[0],v=f[1],g=(0,o.useState)(""),x=g[0],h=g[1],b=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var o=function(){var o=c(r().mark((function o(){var s,c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,s=(0,l.IO)((0,l.hJ)(a.db,e,n,t),(0,l.Xo)(i)),r.next=4,(0,l.PL)(s);case 4:c=r.sent,b.current&&(d(c.docs.map((function(e){return p({},e.data())}))),v(!1)),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),h(r.t0.message),v(!1);case 12:case"end":return r.stop()}}),o,null,[[0,8]])})));return function(){return o.apply(this,arguments)}}();return o(),function(){return b.current=!1}}),[e,n,t,i]),{documents:u,loading:m,error:x}}function m(e,n,t){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0,u=(0,o.useState)([]),d=u[0],f=u[1],m=(0,o.useState)(!0),v=m[0],g=m[1],x=(0,o.useState)(""),h=x[0],b=x[1],y=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var o=function(){var o=c(r().mark((function o(){var c,u;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=(0,l.hJ)(a.db,e,n,t),""!==i&&(c=(0,l.IO)(c,(0,l.Xo)(i))),s&&(c=(0,l.IO)(c,(0,l.b9)(s))),r.next=6,(0,l.PL)(c);case 6:u=r.sent,y.current&&(f(u.docs.map((function(e){return p({},e.data())}))),g(!1)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),b(r.t0.message),g(!1);case 14:case"end":return r.stop()}}),o,null,[[0,10]])})));return function(){return o.apply(this,arguments)}}();return o(),function(){return y.current=!1}}),[e,n,t,i,s]),{documents:d,loading:v,error:h}}}},function(e){e.O(0,[5778,2702,8333,6223,7067,5099,2044,5121,9774,2888,179],(function(){return n=67741,e(e.s=n);var n}));var n=e.O();_N_E=n}]);