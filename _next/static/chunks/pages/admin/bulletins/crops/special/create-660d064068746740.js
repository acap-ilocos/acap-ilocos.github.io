(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4169],{13063:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/bulletins/crops/special/create",function(){return t(4089)}])},37634:function(e,n,t){"use strict";t.d(n,{Z:function(){return c}});var r=t(85893),i=t(25675),o=t(87357),a=t(15861),l=t(26660),s={container:{textAlign:"center",minHeight:"200px",width:"100%",border:"4px solid rgba(0, 0, 0, 0.11)",borderRadius:function(e){return e.spacing(2)},color:function(e){return e.palette.text.secondary},borderStyle:"dashed",padding:function(e){return e.spacing(2)}}};var c=function(e){var n=e.message,t=void 0===n?"Failed to load data":n,c=e.style,u=void 0===c?{}:c;return(0,r.jsxs)(o.Z,{sx:s.container,style:u,children:[(0,r.jsx)(i.default,{unoptimized:!0,src:(0,l.assetPrefixer)("images/icons/empty-state-light.svg"),height:100,width:120,loader:l.imageLoader,alt:"Empty data"}),(0,r.jsx)(a.Z,{variant:"subtitle1",children:t})]})}},53577:function(e,n,t){"use strict";var r=t(85893),i=t(87357),o=t(98456);n.Z=function(e){var n=e.text,t=void 0===n?"":n,a=e.size,l=void 0===a?24:a,s=e.children;return(0,r.jsxs)(i.Z,{sx:{width:"100%",textAlign:"center",height:"18vh"},children:[(0,r.jsxs)(i.Z,{sx:{width:"100%",textAlign:"center",marginTop:function(e){return e.spacing(6)},marginBottom:"32px",display:"flex",justifyContent:"center"},children:[(0,r.jsx)("span",{children:""!==t?t:"Loading..."})," \xa0",(0,r.jsx)(o.Z,{size:l})]}),s]})}},55688:function(e,n,t){"use strict";var r=t(85893),i=t(67294),o=t(45697),a=t.n(o),l=t(14866),s=t(46901);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=i.forwardRef((function(e,n){return(0,r.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function d(e){var n=e.openSnackbar,t=e.message,o=e.severity,a=e.closeHandlerCB,s=void 0===a?function(){}:a,c=(0,i.useState)(n),d=c[0],p=c[1];(0,i.useEffect)((function(){p(n)}),[n]);var f=function(){p(!1),s()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:f,children:(0,r.jsx)(u,{onClose:f,severity:o,sx:{width:"100%"},children:t})})}d.propTypes={openSnackbar:a().bool,message:a().string,severity:a().string},n.Z=d},22094:function(e,n,t){"use strict";var r=t(85893),i=t(87357),o=t(11057),a=t(50657),l=t(31425),s=t(6514),c=t(37645),u=t(25675),d=t(26660),p=t(37634),f=t(53577);n.Z=function(e){var n=e.open,t=e.pdfPreview,v=e.error,g=void 0===v?"":v,b=e.loading,m=void 0!==b&&b,h=e.toggleViewerOpen;return(0,r.jsxs)(a.Z,{open:n,maxWidth:"lg",fullWidth:!0,"aria-labelledby":"data-saved-success","aria-describedby":"alert-dialog-description",children:[(0,r.jsx)(c.Z,{id:"data-saved-success",children:t.filename?"Bulletin Preview - ".concat(t.filename):"Bulletin Preview"}),(0,r.jsx)(s.Z,{sx:{padding:0,overflow:"hidden"},children:(0,r.jsx)(i.Z,{id:"alert-dialog-description",children:m?(0,r.jsx)("div",{style:{width:"100%",height:"90vh",textAlign:"center"},children:(0,r.jsx)(f.Z,{text:"Loading Preview...",children:(0,r.jsx)(u.default,{unoptimized:!0,src:(0,d.assetPrefixer)("images/icons/data-processing-128.png"),height:100,width:100,loader:d.imageLoader,alt:"Loading Preview"})})}):""!==g?(0,r.jsx)("div",{style:{width:"100%",height:"100vh"},children:(0,r.jsx)(p.Z,{message:g})}):(0,r.jsx)("embed",{src:t.url,style:{width:"100%",height:"70vh"}})})}),(0,r.jsx)(l.Z,{children:(0,r.jsx)(o.Z,{variant:"contained",onClick:h,autoFocus:!0,children:"OK"})})]})}},4089:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Le}});var r=t(34051),i=t.n(r),o=t(85893),a=t(67294),l=t(9473),s=t(11163),c=t(45697),u=t.n(c),d=t(41664),p=t(21023),f=t(76295),v=t(11057),g=t(56863),b=t(87357),m=t(86886),h=t(93946),y=t(61903),x=t(15861),_=t(11829),j=t(19227),S=t(22094),w=t(98456),O=t(87918),P=t(67720),E=t(40044),k=t(88409),Z=t(53063),C=t(901),A={container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",borderColor:"#E2E8F0"},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}},selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},conditionLegend:{borderRadius:function(e){return e.spacing(1)},width:"100%",padding:function(e){return e.spacing(1)},border:"1px solid grey",textAlign:"center",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",float:"left"},autocomplete:{marginTop:function(e){return e.spacing(1)}},recSeasonal:{marginTop:function(e){return e.spacing(1)},"& p, ul, ol":{fontSize:"14px"}},button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"50px"}},pdfcontent:{ul:{paddingLeft:3}},recSeasonalStage:{marginTop:function(e){return e.spacing(5)},marginBottom:function(e){return e.spacing(2)},textDecoration:"underline"}};function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){T(e,n,t[n])}))}return e}function D(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function L(e){var n,t,r,i,s=function(e){var n=e.children,t=e.value,r=e.index,i=D(e,["children","value","index"]);return(0,o.jsx)("div",I({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},i,{children:t===r&&(0,o.jsx)(b.Z,{sx:{p:3,whiteSpace:e.smsstyle},children:n})}))},c=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},u=e.options,p=e.smstext,f=e.loading,h=e.handleSave,y=e.handlePreview,_=e.show,j=void 0===_||_,S=e.isCreateDisabled,T=void 0!==S&&S,L=(0,l.I0)(),R=(0,l.v9)((function(e){return e.recommendations})).recommendations,N=(0,l.v9)((function(e){return e.reports})),F=N.error,B=N.status,G=(0,l.v9)((function(e){return e.dashboard.isEnglish})),M=(0,a.useState)(0),H=M[0],W=M[1],z=(0,a.useState)(!1),V=z[0],Y=z[1];(0,a.useEffect)((function(){Y(u.loading||B===C.G.PENDING)}),[u.loading,B]);return(0,o.jsxs)(m.ZP,{container:!0,sx:A.container,gap:3,style:{marginTop:"24px",padding:f?"16px":"24px"},children:[(0,o.jsxs)(m.ZP,{item:!0,sx:A.item,xs:12,lg:12,children:[(0,o.jsx)(b.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,o.jsx)(w.Z,{size:16,color:"primary",sx:{display:f?"block":"none"}})}),1===(null===R||void 0===R?void 0:R.length)&&j&&(0,o.jsx)(b.Z,{children:(0,o.jsxs)(b.Z,{sx:{width:"100%",marginTop:{xs:"85px",lg:"0px"}},children:[(0,o.jsx)(b.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,o.jsxs)(k.Z,{value:H,onChange:function(e,n){W(n)},"aria-label":"basic tabs example",children:[(0,o.jsx)(E.Z,I({label:"PDF FORM"},c(0))),(0,o.jsx)(E.Z,I({label:"SMS FORM"},c(1)))]})}),(0,o.jsxs)(s,{value:H,index:0,smsstyle:"normal",children:[(0,o.jsxs)(b.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px"},children:[(0,o.jsx)(x.Z,{variant:"h4",children:"Impact Outlooks"}),(0,o.jsx)(O.Z,{size:"medium",variant:"outlined",label:G?"Tagalog":"English",onClick:function(){return L((0,Z.cX)())},sx:{width:"90px"}})]}),1===(null===R||void 0===R?void 0:R.length)&&(0,o.jsx)(b.Z,{sx:A.recSeasonal,children:(0,o.jsx)("div",{style:{marginBottom:"80px"},dangerouslySetInnerHTML:{__html:G?null===(n=R[0])||void 0===n?void 0:n.impact_outlook_english:null===(t=R[0])||void 0===t?void 0:t.impact_outlook_tagalog}})}),(0,o.jsx)("hr",{}),(0,o.jsx)(x.Z,{variant:"h4",sx:{marginTop:"32px"},children:"Recommendations"}),(0,o.jsx)(b.Z,{sx:A.recSeasonal,children:(0,o.jsx)("div",{style:{marginBottom:"48px"},dangerouslySetInnerHTML:{__html:G?null===(r=R[0])||void 0===r?void 0:r.management_recommendations_english:null===(i=R[0])||void 0===i?void 0:i.management_recommendations_tagalog}})})]}),(0,o.jsx)(s,{value:H,index:1,smsstyle:"pre-wrap",children:p})]})})]}),(0,o.jsxs)(b.Z,{sx:{marginBottom:"16px",width:"100%",display:1===(null===R||void 0===R?void 0:R.length)&&j?"block":"none"},children:[(0,o.jsx)("br",{}),(0,o.jsx)(P.Z,{}),(0,o.jsx)("br",{}),""!==F&&(0,o.jsxs)(x.Z,{variant:"caption",sx:{color:"red"},children:["Error: ",F]}),(0,o.jsxs)(g.Z,{size:"large","aria-label":"large button group",sx:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:[(0,o.jsx)(d.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,o.jsx)(v.Z,{disabled:V,children:"Cancel"})}),(0,o.jsxs)(v.Z,{onClick:y,disabled:V,children:[(0,o.jsx)("span",{style:{display:V?"none":"block"},children:"Preview"})," ","\xa0",(0,o.jsx)(w.Z,{size:20,color:"secondary",sx:{display:V?"block":"none"}})]}),(0,o.jsx)(v.Z,{variant:"contained",onClick:h,disableElevation:!0,disabled:V||T,children:"Save"})]})]})]})}L.propTypes={options:u().object,smstext:u().string,isCreateDisabled:u().bool,show:u().bool,loading:u().bool,handleSave:u().func,handlePreview:u().func};var R=L,N=t(25675),F=t(26660),B={selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},width:"100%",display:"grid",placeContent:"center",padding:"20px",marginTop:function(e){return e.spacing(1)},textAlign:"center","& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}}};function G(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function M(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){M(e,n,t[n])}))}return e}function W(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return G(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return G(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=[{key:"sel_crop",label:"Crop"},{key:"sel_province",label:"Province"}],V=[{key:"sel_month",label:"Months"},{key:"climate_risk",label:"Climate Risk"},{key:"sel_stage",label:"Crop Stages"},{key:"sel_activity",label:"Activities"}],Y=[{key:"sel_typhoon",label:"Typhoon Name"},{key:"sel_signal",label:"Wind Signal"}],U=function(){return(0,o.jsx)(x.Z,{variant:"caption",color:"orange",children:(0,o.jsx)("strong",{children:"No data available."})})};function q(e){var n=e.cropstages,t=e.climateRisk,r=e.selecteditems,i=e.farmoperations,l=e.loading,s=e.reportType,c=void 0===s?"seasonal":s,u=(0,a.useMemo)((function(){return"special"===c?W(Y).concat(W(z)):W(z).concat(W(V))}),[c]),d=(0,a.useMemo)((function(){return"special"===c?null===(null===r||void 0===r?void 0:r.sel_signal):null===(null===r||void 0===r?void 0:r.sel_province)}),[c,r]);return(0,o.jsxs)(b.Z,{sx:B.selectionSummary,children:[(0,o.jsx)(x.Z,{variant:"h6",children:"Selection Summary"}),d?(0,o.jsxs)(b.Z,{sx:H({},B.welcome,"special"===c&&{minHeight:"184px"}),children:[(0,o.jsx)(N.default,{unoptimized:!0,src:(0,F.assetPrefixer)("images/icons/finance.svg"),height:85,width:85,loader:F.imageLoader,alt:"Empty data"}),(0,o.jsxs)(b.Z,{sx:{marginTop:"16px"},children:[(0,o.jsx)(x.Z,{variant:"subtitle2",children:"Crop Recommendations PDF Bulletins Creator"}),(0,o.jsx)(x.Z,{variant:"subtitle2",children:"Please select a province to start."})]})]}):(0,o.jsx)(b.Z,{sx:H({},B.summary,"special"===c&&{minHeight:"184px"}),children:u.map((function(e,a){var s="-";switch(e.key){case"sel_activity":s=null!==r.sel_crop?i||(0,o.jsx)(U,{}):"";break;case"sel_month":s=null!==r[e.key]?r[e.key].label:"-";break;case"climate_risk":s=t;break;case"sel_stage":s=null!==r.sel_crop?n||(0,o.jsx)(U,{}):"";break;case"sel_signal":var u;s=null!==r[e.key]?null===(u=r[e.key])||void 0===u?void 0:u.label:"";break;default:s=null!==r[e.key]?r[e.key]:""}var d=e.label;return"sel_month"===e.key&&"tenday"===c&&(d="Date"),(0,o.jsxs)("div",{children:[(0,o.jsxs)(x.Z,{variant:"subtitle2",style:{display:"inline-block"},children:[d,": \xa0"]}),(0,o.jsx)(x.Z,{variant:"body2",style:{display:"inline-block"},children:["sel_activity"].includes(e.key)&&l?(0,o.jsx)("span",{children:"loading..."}):s})]},"selected-".concat(a))}))}),""!==r.error&&(0,o.jsx)(x.Z,{variant:"caption",sx:{color:"red"},children:r.error})]})}q.propTypes={selecteditems:u().object,farmoperations:u().string,loading:u().bool,reportType:u().string};var X=q,$=t(55688),J=t(12671),K=t(47426),Q=t(22757);function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ee(e,n,t[n])}))}return e}function te(e){var n,t=(0,a.useState)(!1),r=t[0],i=t[1],c=(0,s.useRouter)(),u=(0,l.I0)(),w=e.open,O=e.loading,P=e.isloadingreport,E=e.isdisabled,k=e.optsprovinces,Z=e.optsmunicipalities,C=e.optscrops,A=e.optswindsignals,T=e.sel_options,I=e.message,D=e.smstext,L=e.pageTitle,N=void 0===L?"":L,F=e.pageDescription,B=void 0===F?"":F,G=e.pdfPreview,M=e.handlePreview,H=e.handleSave,W=e.resetSelections,z=e.togglePrompt,V=e.toggleViewerOpen,Y=e.onSelectItemChange,U=(0,l.v9)((function(e){return e.reports})).report;(0,a.useEffect)((function(){var e;r&&((null===T||void 0===T||null===(e=T.sel_signal)||void 0===e?void 0:e.code)===K.hi.SIGNAL_0?(null===T||void 0===T?void 0:T.sel_crop)||i(!1):T.sel_municipality||i(!1))}),[null===T||void 0===T?void 0:T.sel_municipality,null===T||void 0===T?void 0:T.sel_crop,null===T||void 0===T?void 0:T.sel_signal,r]);var q=function(){U&&(u((0,J.s_)()),c.push("/admin/bulletins/crops/report/view/?docId=".concat(U.id)))},ee=function(e){var n=e.options,t=e.valueNotNull,r=e.labelFetch,i=e.labelSelect,o=void 0===i?"Select a province":i,a=e.labelValue,l=void 0===a?"Province":a,s=null!==r&&void 0!==r?r:"Loading...";return n.length>0&&(s=null===t?o:l),s};return(0,o.jsxs)("div",{children:[(0,o.jsx)(j.Z,{isOpen:I.isOpen,maxWidth:"xs",openButtonText:null,title:I.title,contentText:I.msg,loading:I.loading,modalCancelHandlerCB:function(){I.savesuccess?q():z()},modalConfirmHandlerCB:function(){I.savesuccess?q():H()}}),(0,o.jsx)(S.Z,{open:w,pdfPreview:G,error:T.error,loading:T.loading,toggleViewerOpen:V}),(0,o.jsx)($.Z,{openSnackbar:""!==T.error,message:T.error,severity:"warning"}),(0,o.jsxs)(m.ZP,{container:!0,sx:Q.Z.container,children:[(0,o.jsxs)(b.Z,{sx:Q.Z.headerText,children:[(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(x.Z,{variant:"h5",children:N}),(0,o.jsx)("p",{dangerouslySetInnerHTML:{__html:B}})]}),(0,o.jsx)(b.Z,{children:(0,o.jsx)(h.Z,{"aria-label":"exit",size:"medium",children:(0,o.jsx)(d.default,{href:"/admin/bulletins/crops",passHref:!0,children:(0,o.jsx)(p.Z,{fontSize:"inherit"})})})})]}),(0,o.jsxs)(m.ZP,{item:!0,sx:Q.Z.item,xs:12,lg:4,children:[(0,o.jsx)(x.Z,{variant:"h6",children:"Selection Options"}),(0,o.jsx)(f.Z,{disablePortal:!0,id:"signal",size:"small",value:T.sel_signal,disabled:0===A.length||""!==T.error||O,options:A,sx:Q.Z.autocomplete,PaperComponent:_.Z,renderInput:function(e){return(0,o.jsx)(y.Z,ne({},e,{label:ee({options:A,valueNotNull:null===T||void 0===T?void 0:T.sel_signal,labelSelect:"Select a wind signal",labelValue:"Wind Signal"})}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){Y(e,ne({},n,{from:"signal"})),i(!1)}}),(0,o.jsx)(f.Z,{disablePortal:!0,id:"crop",size:"small",value:T.sel_crop,disabled:!(null===T||void 0===T?void 0:T.sel_signal)||0===C.length||""!==T.error||O,options:C,sx:Q.Z.autocomplete,PaperComponent:_.Z,renderInput:function(e){return(0,o.jsx)(y.Z,ne({},e,{label:ee({options:C,valueNotNull:null===T||void 0===T?void 0:T.sel_crop,labelSelect:"Select crop",labelValue:"Crop"})}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){Y(e,ne({},n,{from:"crop"})),i(!1)}}),(0,o.jsx)(f.Z,{disablePortal:!0,id:"province",size:"small",value:T.sel_province,disabled:0===k.length||!(null===T||void 0===T?void 0:T.sel_crop)||!(null===T||void 0===T?void 0:T.sel_signal)||0===(null===T||void 0===T||null===(n=T.sel_signal)||void 0===n?void 0:n.value)||""!==T.error||O,options:k,sx:Q.Z.autocomplete,PaperComponent:_.Z,renderInput:function(e){return(0,o.jsx)(y.Z,ne({},e,{label:ee({options:k,valueNotNull:null===T||void 0===T?void 0:T.sel_province,labelFetch:"Select a province",labelSelect:"Select a province",labelValue:"Province"})}))},getOptionDisabled:function(e){return e.disabled},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){Y(e,ne({},n,{from:"province"}))}}),(0,o.jsx)(f.Z,{disablePortal:!0,id:"municipality",size:"small",value:T.sel_municipality,disabled:0===Z.length||!(null===T||void 0===T?void 0:T.sel_crop)||""!==T.error||O,options:Z,sx:Q.Z.autocomplete,PaperComponent:_.Z,renderInput:function(e){return(0,o.jsx)(y.Z,ne({},e,{label:null===T.sel_municipality?"Select a municipality":"Municipality"}))},getOptionDisabled:function(e){return e.disabled||void 0!==e.iscalendar},isOptionEqualToValue:function(e,n){return e.label===n},onChange:function(e,n){Y(e,ne({},n,{from:"municipality"})),i(!1)}}),(0,o.jsxs)(g.Z,{disableElevation:!0,size:"small","aria-label":"outlined button controls group",disabled:P||E,sx:{marginTop:"16px",float:"right"},children:[(0,o.jsx)(v.Z,{variant:"outlined",disabled:O||P,onClick:W,children:"Reset"}),(0,o.jsx)(v.Z,{variant:"contained",onClick:function(){return i((function(e){return!e}))},disabled:O||E||""!==T.error||r,children:"Generate"})]})]}),(0,o.jsx)(m.ZP,{item:!0,sx:Q.Z.item,xs:12,lg:8,children:(0,o.jsx)(X,{selecteditems:T,loading:O,reportType:"special"})})]}),(0,o.jsx)(R,{show:r,loading:O,options:T,smstext:D,isCreateDisabled:E,handlePreview:M,handleSave:z})]})}te.propTypes={optsprovinces:u().array,optsmunicipalities:u().array,sel_options:u().object,loading:u().bool,isloadingreport:u().bool,isdisabled:u().bool,open:u().bool,message:u().object,smstext:u().string,pageTitle:u().string,pageDescription:u().string,pdfPreview:u().object,onSelectItemChange:u().func,handlePreview:u().func,handleSave:u().func,toggleViewerOpen:u().func,resetSelections:u().func,togglePrompt:u().func};var re=te,ie=t(66383),oe=t(95243),ae=t(30560),le=t(1029),se=t(16327),ce=t(61690),ue=t(87006),de=t(72216),pe=t(38885);function fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ve(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ge(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return fe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fe(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,n,t,r){var i=(0,a.useState)([]),o=i[0],l=i[1];return(0,a.useEffect)((function(){if((null===e||void 0===e?void 0:e.data)&&(null===n||void 0===n?void 0:n.data)&&t.length>0&&null!==r){var i=e.data.filter((function(e){return e.signal===(null===r||void 0===r?void 0:r.value)})).map((function(e){return e.province})).filter((function(e,n,t){return t.indexOf(e)===n})),o=e.data.reduce((function(e,n){return void 0===e[n.province]&&(e[n.province]=[]),e[n.province]=ge(e[n.province]).concat(ge(n.municipalities)),function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ve(e,n,t[n])}))}return e}({},e)}),{}),a=ge(t);a.forEach((function(n){n.disabled=!i.includes(n.label),n.municipalities.forEach((function(t){var r=e.data.findIndex((function(e){return e.province===t.province&&e.municipalities.includes(t.label)}));n.disabled?t.disabled=!0:(t.disabled=!o[n.label].includes(t.label),t.signal=r>-1?e.data[r].signal:0)}))})),l(a)}}),[e,n,t,r]),{affectedprovinces:o}}var me=t(23766);function he(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ye(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){he(e,n,t[n])}))}return e}var xe=[{id:0,label:K.hl.general_no_signal,value:0,code:K.hi.SIGNAL_0,disabled:!1},{id:1,label:K.hl.signal_number_1,value:1,code:K.hi.SIGNAL_1,disabled:!0},{id:2,label:K.hl.signal_number_2,value:2,code:K.hi.SIGNAL_2,disabled:!0},{id:3,label:K.hl.signal_number_3,value:3,code:K.hi.SIGNAL_3,disabled:!0},{id:4,label:K.hl.signal_number_4,value:4,code:K.hi.SIGNAL_4,disabled:!0},{id:5,label:K.hl.signal_number_5,value:5,code:K.hi.SIGNAL_5,disabled:!0}];var _e=t(1096);function je(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Se(e){var n=e.crop,t=e.signal,r=e.type,o=void 0===r?"special":r,s=e.isDispatch,c=void 0!==s&&s,u=(0,a.useState)([]),d=u[0],p=u[1],f=(0,a.useState)(!1),v=f[0],g=f[1],b=(0,a.useState)(""),m=b[0],h=b[1],y=(0,l.I0)();return(0,a.useEffect)((function(){var e=function(){var e,r=(e=i().mark((function e(){var r,a,l,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=[{field:"crop",op:"==",value:n},{field:"wind_signal",op:"==",value:t}],g(!0),y((0,de.nS)()),e.next=6,(0,_e.O_)({type:o,queryFields:r});case 6:if(a=e.sent,g(!1),p(a),c&&y((0,de.lO)(a||[])),0!==(a||[]).length){e.next=12;break}throw new Error("No available recommendations");case 12:e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),h(null!==(s=null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.data)&&void 0!==s?s:e.t0.message),g(!1);case 20:case"end":return e.stop()}}),e,null,[[0,14]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){je(o,r,i,a,l,"next",e)}function l(e){je(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();n&&t&&e()}),[n,t,o,c,y]),{recommendations:d,loading:v,error:m}}var we=t(87682),Oe=t(27392),Pe=t(87784);function Ee(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ke(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Ze(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){ke(o,r,i,a,l,"next",e)}function l(e){ke(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Ce(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ae(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Ce(e,n,t[n])}))}return e}function Te(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Ee(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ee(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ie={url:"",filename:""},De={sel_province:null,sel_municipality:null,sel_crop:null,sel_signal:null,sel_typhoon:null,processed:!1,loading:!1,error:"",success:""};var Le=(0,oe.Z)((function(e){var n,t,r=e.user,s=e.onBtnLogoutClick,c=e.loading,u=(0,a.useState)(De),d=u[0],p=u[1],f=(0,a.useState)([]),v=f[0],g=f[1],b=(0,l.v9)((function(e){return e.reports})),m=b.status,h=b.report,y=(0,l.v9)((function(e){return e.dashboard.reportType})),x=(0,l.v9)((function(e){return e.dashboard.isEnglish})),_=(0,a.useState)(!0),j=_[0],S=_[1],w=(0,a.useState)(!1),O=w[0],P=w[1],E=(0,a.useRef)(!1),k=(0,a.useState)(Ie),A=k[0],T=k[1],I=(0,a.useState)(Oe.BF),D=I[0],L=I[1],R=(0,l.I0)(),N=Te((0,we.ky)(le.K.GLOBAL_COLLECTIONS,le.K.CYCLONE_ADVISORY),2),F=N[0],B=N[1],G=Te((0,we.ky)(ae.M.WEATHER_FORECASTS,"".concat("ilocos","/").concat(ae.M.SUB_SPECIAL_COMMON,"/").concat(ae.M.COMMON_SPECIAL_TYPE.WIND_SPEED)),2),M=G[0],H=G[1],W=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,a.useState)([]),r=t[0],i=t[1],o=(0,a.useState)(null),l=o[0],s=o[1];return(0,a.useEffect)((function(){if(!n)if(0===(null!==e&&void 0!==e?e:[]).length)i(xe);else{var t,r,o,a,l=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(r=t.signal)||void 0===r?void 0:r.map((function(e){return e.number}));s(null===e||void 0===e||null===(o=e.data)||void 0===o||null===(a=o.meta)||void 0===a?void 0:a.typhoon_name),i(xe.map((function(e){return ye({},e,{disabled:0!==e.value&&!l.includes(e.value)})})))}}),[e,n]),{windSignals:r,typhoon:l}}(F,B),z=W.windSignals,V=be(M,F,v,null===d||void 0===d?void 0:d.sel_signal).affectedprovinces,Y=(0,me.Z)(d.sel_province,V),U=(0,pe.Z)(!0),q=U.cropList,X=U.loading,$=q.map((function(e,n){return{disabled:!1,label:e,id:n}})),Q=(0,a.useMemo)((function(){var e,n;return(0!==(null===(e=d.sel_signal)||void 0===e?void 0:e.value)||null===(null===d||void 0===d?void 0:d.sel_crop))&&(!((null===(n=d.sel_signal)||void 0===n?void 0:n.value)>0)||(!d.sel_province||!d.sel_municipality))}),[d]),ee=Se({type:"special",crop:null===d||void 0===d?void 0:d.sel_crop,signal:null===d||void 0===d||null===(n=d.sel_signal)||void 0===n?void 0:n.code,isDispatch:!0}),ne=ee.loading,te=ee.error,oe=Se({type:"special_sms",crop:null===d||void 0===d?void 0:d.sel_crop,signal:null===d||void 0===d||null===(t=d.sel_signal)||void 0===t?void 0:t.code}),fe=oe.recommendations,ve=oe.loading,ge=oe.error,he=(0,a.useMemo)((function(){if((null===fe||void 0===fe?void 0:fe.length)>0&&F){var e,n,t,r=fe[0].sms.replace("{{special_weather_name_identifier}}",null!==(t=null===F||void 0===F||null===(e=F.data)||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.typhoon_name)&&void 0!==t?t:"-");return(null===d||void 0===d?void 0:d.sel_province)&&(null===d||void 0===d?void 0:d.sel_municipality)&&(r=r.replace("{{municipality_identifier}}","".concat(null===d||void 0===d?void 0:d.sel_province,", ").concat(null===d||void 0===d?void 0:d.sel_municipality))),r}return null}),[fe,F,null===d||void 0===d?void 0:d.sel_province,null===d||void 0===d?void 0:d.sel_municipality]);(0,a.useEffect)((function(){E.current=!0;var e=function(){var e=Ze(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,se.$m)();case 3:n=e.sent,E&&g(n.data),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){E.current=!1}}),[]),(0,a.useEffect)((function(){R((0,de.nS)()),R((0,J.s_)())}),[R]),(0,a.useEffect)((function(){S(c||ne||X||ve||B===C.G.PENDING||H===C.G.PENDING)}),[c,ne,X,ve,B,H]),(0,a.useEffect)((function(){T(Ie)}),[x]),(0,a.useEffect)((function(){if(""!==te){var e=te||ge;p((function(n){return Ae({},n,{error:e})}))}else p((function(e){return Ae({},e,{error:""})}))}),[te,ge]),(0,a.useEffect)((function(){m===C.G.FULLFILLED&&null!==h&&E.current&&L((function(e){return Ae({},e,{msg:"Success! Bulletin report created.",loading:!1,savesuccess:!0,docId:h.id})}))}),[m,h]);var _e=function(){var e=Ze(i().mark((function e(){var n,t,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===A.url){e.next=3;break}return P(!0),e.abrupt("return");case 3:return p((function(e){return Ae({},e,{loading:!0,error:"",success:""})})),e.prev=4,n={region:"ilocos",province:d.sel_province,municipality:d.sel_municipality,crop:d.sel_crop,language:x?"en":"tag",signal:null===d||void 0===d?void 0:d.sel_signal.code,operation:"preview"},P(!0),p((function(e){return Ae({},e,{loading:!0,error:""})})),e.next=10,(0,ue.U1)(n);case 10:t=e.sent,r=new Blob([t],{type:"application/pdf"}),(o={}).href=URL.createObjectURL(r),o.download="".concat(d.sel_province,"_").concat(d.sel_municipality,".pdf"),T((function(e){return Ae({},e,{url:o.href,filename:o.download})})),p((function(e){return Ae({},e,{loading:!1,success:"Bulletin preview created."})})),e.next=25;break;case 19:return e.prev=19,e.t0=e.catch(4),e.next=23,(0,Pe.fu)(e.t0);case 23:a=e.sent,p((function(e){return Ae({},e,{loading:!1,error:a})}));case 25:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Ze(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(Ae({},D,{loading:!0,msg:"Generating reports..."}));try{n={region:"ilocos",province:d.sel_province,municipality:d.sel_municipality,crop:d.sel_crop,language:x?"en":"tag",signal:null===d||void 0===d?void 0:d.sel_signal.code,operation:"create"},R((0,ce.tR)(n)).unwrap().then((function(){y!==Oe.Ry.SPECIAL_WEATHER&&(R((0,Z.uq)(Oe.Ry.SPECIAL_WEATHER)),R((0,ce.RC)({uid:r.uid,type:Oe.Ry.SPECIAL_WEATHER})))})).catch((function(e){E.current&&L((function(n){return Ae({},n,{msg:e,loading:!1,savesuccess:!1,docId:null})}))}))}catch(o){t="",void 0!==o.response&&(t=void 0!==o.response.data&&"[object Blob]"===((i=o.response.data)&&"undefined"!==typeof Symbol&&i.constructor===Symbol?"symbol":typeof i)?o.response.data:""),""===t&&(t=o.message),p((function(e){return Ae({},e,{loading:!1,error:t})}))}case 2:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsx)(ie.Z,{loading:c,user:r,onBtnLogoutClick:s,accLevel:K.DW.ADMIN,children:(0,o.jsx)(re,{optsprovinces:V,optsmunicipalities:Y,optswindsignals:z,optscrops:$,sel_options:d,loading:j,isloadingreport:m===C.G.PENDING,isdisabled:Q,open:O,message:D,smstext:he,pageTitle:"Special Weather Bulletin",pageDescription:"Create <strong>Special Weather</strong> crop recommendations bulletins. Finalized bulletins will be automatically uploaded to the site for public download.",pdfPreview:A,onSelectItemChange:function(e,n){var t=n.from,r=n.label;if(T(Ie),["signal","crop"].includes(t)&&R((0,de.nS)()),""!==d.error&&p((function(e){return Ae({},e,{error:""})})),Object.keys(n).includes("id"))switch(t){case"signal":var i,o,a;p(Ae({},De,{sel_signal:n,sel_typhoon:(null===n||void 0===n?void 0:n.code)===K.hi.SIGNAL_0?"(General - No Signal)":null!==(a=null===F||void 0===F||null===(i=F.data)||void 0===i||null===(o=i.meta)||void 0===o?void 0:o.typhoon_name)&&void 0!==a?a:"-"}));break;case"crop":p((function(e){return Ae({},e,{sel_crop:r})}));break;case"province":p((function(e){return Ae({},e,{sel_province:r,sel_municipality:null})}));break;case"municipality":p((function(e){return Ae({},e,{sel_municipality:r})}))}else"signal"===t?p(De):"crop"===t?p((function(e){return Ae({},e,{sel_crop:null})})):"province"===t?p((function(e){return Ae({},e,{sel_province:null,sel_municipality:null})})):"municipality"===t&&p((function(e){return Ae({},e,{sel_municipality:null})}))},handlePreview:_e,handleSave:je,toggleViewerOpen:function(){P((function(e){return!e}))},resetSelections:function(){p(De),R((0,de.nS)())},togglePrompt:function(){L((function(e){return Ae({},Oe.BF,{isOpen:!e.isOpen})}))}})})}))},23766:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(67294);function i(e,n){var t=(0,r.useState)([]),i=t[0],o=t[1];return(0,r.useEffect)((function(){var t,r;o(e&&n&&null!==(r=null===(t=n.find((function(n){return n.label===e})))||void 0===t?void 0:t.municipalities)&&void 0!==r?r:[])}),[e,n]),i}},87682:function(e,n,t){"use strict";t.d(n,{ky:function(){return p},m$:function(){return f},tl:function(){return v}});var r=t(34051),i=t.n(r),o=t(67294),a=t(25321),l=t(96772);function s(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function c(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){s(o,r,i,a,l,"next",e)}function l(e){s(o,r,i,a,l,"throw",e)}a(void 0)}))}}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){u(e,n,t[n])}))}return e}function p(e,n){var t=(0,o.useState)(null),r=t[0],s=t[1],u=(0,o.useState)(!0),d=u[0],p=u[1],f=(0,o.useState)(""),v=f[0],g=f[1],b=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var t=function(){var t=c(i().mark((function t(){var r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=(0,a.JU)(l.db,e,n),t.next=4,(0,a.QT)(r);case 4:o=t.sent,b.current&&(o.exists()&&s(o.data()),p(!1)),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),g(t.t0.message),p(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){return b.current=!1}}),[e,n]),[r,d,v]}function f(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=(0,o.useState)([]),u=s[0],p=s[1],f=(0,o.useState)(!0),v=f[0],g=f[1],b=(0,o.useState)(""),m=b[0],h=b[1],y=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var o=function(){var o=c(i().mark((function o(){var s,c;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,s=(0,a.IO)((0,a.hJ)(l.db,e,n,t),(0,a.Xo)(r)),i.next=4,(0,a.PL)(s);case 4:c=i.sent,y.current&&(p(c.docs.map((function(e){return d({},e.data())}))),g(!1)),i.next=12;break;case 8:i.prev=8,i.t0=i.catch(0),h(i.t0.message),g(!1);case 12:case"end":return i.stop()}}),o,null,[[0,8]])})));return function(){return o.apply(this,arguments)}}();return o(),function(){return y.current=!1}}),[e,n,t,r]),{documents:u,loading:v,error:m}}function v(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4?arguments[4]:void 0,u=(0,o.useState)([]),p=u[0],f=u[1],v=(0,o.useState)(!0),g=v[0],b=v[1],m=(0,o.useState)(""),h=m[0],y=m[1],x=(0,o.useRef)(!0);return(0,o.useEffect)((function(){var o=function(){var o=c(i().mark((function o(){var c,u;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,c=(0,a.hJ)(l.db,e,n,t),""!==r&&(c=(0,a.IO)(c,(0,a.Xo)(r))),s&&(c=(0,a.IO)(c,(0,a.b9)(s))),i.next=6,(0,a.PL)(c);case 6:u=i.sent,x.current&&(f(u.docs.map((function(e){return d({},e.data())}))),b(!1)),i.next=14;break;case 10:i.prev=10,i.t0=i.catch(0),y(i.t0.message),b(!1);case 14:case"end":return i.stop()}}),o,null,[[0,10]])})));return function(){return o.apply(this,arguments)}}();return o(),function(){return x.current=!1}}),[e,n,t,r,s]),{documents:p,loading:g,error:h}}},1029:function(e,n,t){"use strict";t.d(n,{K:function(){return y},d:function(){return x}});var r=t(34051),i=t.n(r),o=t(94763),a=t(96772),l=t(47426),s=t(27392);function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){u(o,r,i,a,l,"next",e)}function l(e){u(o,r,i,a,l,"throw",e)}a(void 0)}))}}function p(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,n){return!n||"object"!==m(n)&&"function"!==typeof n?c(e):n}function b(e,n){return b=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},b(e,n)}var m=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=v(e);if(n){var i=v(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return g(this,t)}}var y={MEDIA_ASSETS:"n_page_media",ASSETS:"n_page_assets",PAGE_SEARCH:"n_page_search",GLOBAL_COLLECTIONS:"w_services",TYPHOON_ADVISORY:"typhoon_advisory",CYCLONE_ADVISORY:"cyclone_advisory"},x=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&b(e,n)}(t,e);var n=h(t);function t(){var e;p(this,t);var r=c(e=n.apply(this,arguments));f(c(e),"getPageAssetsDoc",function(){var e=d(i().mark((function e(n,t){var o,a,l=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=l.length>2&&void 0!==l[2]&&l[2],a=[],e.prev=2,e.next=5,r.getDocumentData(y.ASSETS,n);case 5:if(a=e.sent){e.next=8;break}return e.abrupt("return",[]);case 8:if(t){e.next=10;break}return e.abrupt("return",a);case 10:if(!o){e.next=14;break}return e.abrupt("return",a.data.filter((function(e){return e.page===t})));case 14:return e.abrupt("return",a.data.filter((function(e){return e.page===t})).map((function(e){return e.url})));case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(2),console.error(e.t0.message),new Error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(n,t){return e.apply(this,arguments)}}());var o=c(e);f(c(e),"getTyphoonAdvisory",d(i().mark((function e(){var n,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.doc(o.db,y.GLOBAL_COLLECTIONS,y.TYPHOON_ADVISORY),e.next=3,o.getDoc(n);case 3:if(!(t=e.sent).exists()){e.next=6;break}return e.abrupt("return",t.data());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))));var u=c(e);return f(c(e),"getWeatherForecast",function(){var e=d(i().mark((function e(n,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getNestedCollectionData(y.WEATHER_FORECASTS,n,t,"name");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),f(c(e),"getPdfDownloadURL",function(){var e=d(i().mark((function e(n){var t,r,o,c=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.length>1&&void 0!==c[1]?c[1]:s.Ry.SEASONAL,r="",e.t0=t,e.next=e.t0===s.Ry.SEASONAL?5:e.t0===s.Ry.TEN_DAY?7:e.t0===s.Ry.SPECIAL_WEATHER?9:11;break;case 5:return r=l.Do.PDF_STORAGE_SEASONAL,e.abrupt("break",12);case 7:return r=l.Do.PDF_STORAGE_TENDAY,e.abrupt("break",12);case 9:return r=l.Do.PDF_STORAGE_SPECIAL,e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:return e.prev=12,o=(0,a.iH)(a.tO,"".concat(r,"/").concat(n)),e.next=16,(0,a.Jt)(o);case 16:return e.abrupt("return",e.sent);case 19:throw e.prev=19,e.t1=e.catch(12),new Error(e.t1.message);case 22:case"end":return e.stop()}}),e,null,[[12,19]])})));return function(n){return e.apply(this,arguments)}}()),e}return t}(o.Z)},87784:function(e,n,t){"use strict";t.d(n,{aS:function(){return o},fu:function(){return a}});var r=t(47426);function i(e,n){return null!=n&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](e):e instanceof n}var o=function(e){return e===r.nQ?r.DD:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseFloat(e).toFixed(n)}(e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Promise((function(n){if(void 0===e||"object"!==typeof e)n("Missing error response object");else{var t="";if(e.response)if(i(e.response.data,Blob)){var r=new Blob([e.response.data],{type:"application/octet-stream"}),o=new FileReader;o.onload=function(){var e=o.result;n(e)},o.readAsText(r)}else n("Error reading data");else e.request?(t=e.request,n(t)):(t=e.message,n(t))}}))}}},function(e){e.O(0,[5778,2702,8858,8333,6223,6279,4597,7944,7067,1433,6572,1050,2044,3877,9774,2888,179],(function(){return n=13063,e(e.s=n);var n}));var n=e.O();_N_E=n}]);