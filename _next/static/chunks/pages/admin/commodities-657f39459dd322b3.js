(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9696],{50594:function(e,n,t){"use strict";var r=t(64836);n.Z=void 0;var o=r(t(64938)),i=t(85893),a=(0,o.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");n.Z=a},53457:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var r=t(63366),o=t(87462),i=t(67294),a=t(86010),l=t(27192),s=t(11496),c=t(33616),u=t(28979);function d(e){return(0,u.Z)("MuiFormGroup",e)}(0,t(76087).Z)("MuiFormGroup",["root","row","error"]);var f=t(74423),p=t(15704),m=t(85893);const v=["className","row"],h=(0,s.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.row&&n.row]}})((({ownerState:e})=>(0,o.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})));var g=i.forwardRef((function(e,n){const t=(0,c.Z)({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1}=t,u=(0,r.Z)(t,v),g=(0,f.Z)(),x=(0,p.Z)({props:t,muiFormControl:g,states:["error"]}),b=(0,o.Z)({},t,{row:s,error:x.error}),y=(e=>{const{classes:n,row:t,error:r}=e,o={root:["root",t&&"row",r&&"error"]};return(0,l.Z)(o,d,n)})(b);return(0,m.jsx)(h,(0,o.Z)({className:(0,a.Z)(y.root,i),ownerState:b,ref:n},u))}))},67070:function(e,n,t){"use strict";t(67294);var r=t(88169),o=t(85893);n.Z=(0,r.Z)((0,o.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},56686:function(e,n,t){"use strict";t(67294);var r=t(88169),o=t(85893);n.Z=(0,r.Z)((0,o.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},42176:function(e,n,t){"use strict";t.d(n,{D:function(){return m}});var r=t(87462),o=t(63366),i=t(67294),a=t(86010),l=t(11496),s=t(27192),c=t(73490),u=t(48836),d=t(85893);const f=["className","children"],p=(0,l.ZP)("div",{name:"MuiDataGrid",slot:"ToolbarContainer",overridesResolver:(e,n)=>n.toolbarContainer})((({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(.5,.5,0)}))),m=i.forwardRef((function(e,n){const{className:t,children:i}=e,l=(0,o.Z)(e,f),m=(e=>{const{classes:n}=e;return(0,s.Z)({root:["toolbarContainer"]},c.d,n)})({classes:(0,u.B)().classes});return i?(0,d.jsx)(p,(0,r.Z)({ref:n,className:(0,a.Z)(t,m.root)},l,{children:i})):null}))},6132:function(e,n,t){"use strict";t.d(n,{S:function(){return p}});var r=t(87462),o=t(63366),i=t(67294),a=t(14696),l=t(10269),s=t(27476),c=t(49630),u=t(48836),d=t(85893);const f=["onClick"],p=i.forwardRef((function(e,n){var t;const{onClick:i}=e,p=(0,o.Z)(e,f),m=(0,c.l)(),v=(0,u.B)(),{open:h,openedPanelValue:g}=(0,a.P)(m,l.e);return v.disableColumnSelector?null:(0,d.jsx)(v.components.BaseButton,(0,r.Z)({ref:n,size:"small",color:"primary","aria-label":m.current.getLocaleText("toolbarColumnsLabel"),startIcon:(0,d.jsx)(v.components.ColumnSelectorIcon,{})},p,{onClick:e=>{h&&g===s.y.columns?m.current.hidePreferences():m.current.showPreferences(s.y.columns),null==i||i(e)}},null==(t=v.componentsProps)?void 0:t.baseButton,{children:m.current.getLocaleText("toolbarColumns")}))}))},50853:function(e,n,t){"use strict";t.d(n,{M:function(){return j}});var r=t(87462),o=t(63366),i=t(67294),a=t(11496),l=t(27192),s=t(88082),c=t(98216),u=t(90198),d=t(14696),f=t(61207),p=t(10269),m=t(27476),v=t(49630),h=t(48836),g=t(73490),x=t(85893);const b=["componentsProps"],y=(0,a.ZP)("ul",{name:"MuiDataGrid",slot:"ToolbarFilterList",overridesResolver:(e,n)=>n.toolbarFilterList})((({theme:e})=>({margin:e.spacing(1,1,.5),padding:e.spacing(0,1)}))),j=i.forwardRef((function(e,n){var t,a;const{componentsProps:j={}}=e,Z=(0,o.Z)(e,b),w=j.button||{},C=(0,v.l)(),S=(0,h.B)(),P=(0,d.P)(C,f.DY),_=(0,d.P)(C,u.WH),k=(0,d.P)(C,p.e),O=(e=>{const{classes:n}=e;return(0,l.Z)({root:["toolbarFilterList"]},g.d,n)})({classes:S.classes}),N=i.useMemo((()=>{if(k.open)return C.current.getLocaleText("toolbarFiltersTooltipHide");if(0===P.length)return C.current.getLocaleText("toolbarFiltersTooltipShow");const e=e=>_[e.columnField].filterOperators.find((n=>n.value===e.operatorValue)).label||C.current.getLocaleText(`filterOperator${(0,c.Z)(e.operatorValue)}`).toString();return(0,x.jsxs)("div",{children:[C.current.getLocaleText("toolbarFiltersTooltipActive")(P.length),(0,x.jsx)(y,{className:O.root,children:P.map(((n,t)=>(0,r.Z)({},_[n.columnField]&&(0,x.jsx)("li",{children:`${_[n.columnField].headerName||n.columnField}\n                  ${e(n)}\n                  ${n.value}`},t))))})]})}),[C,k.open,P,_,O]);return S.disableColumnFilter?null:(0,x.jsx)(S.components.BaseTooltip,(0,r.Z)({title:N,enterDelay:1e3},Z,null==(t=S.componentsProps)?void 0:t.baseTooltip,{children:(0,x.jsx)(S.components.BaseButton,(0,r.Z)({ref:n,size:"small",color:"primary","aria-label":C.current.getLocaleText("toolbarFiltersLabel"),startIcon:(0,x.jsx)(s.Z,{badgeContent:P.length,color:"primary",children:(0,x.jsx)(S.components.OpenFilterButtonIcon,{})})},w,{onClick:e=>{var n;const{open:t,openedPanelValue:r}=k;t&&r===m.y.filters?C.current.hideFilterPanel():C.current.showFilterPanel(),null==(n=w.onClick)||n.call(w,e)}},null==(a=S.componentsProps)?void 0:a.baseButton,{children:C.current.getLocaleText("toolbarFilters")}))}))}))},69185:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/commodities",function(){return t(97040)}])},89646:function(e,n,t){"use strict";var r=t(85893),o=t(55113);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a=(0,t(11496).ZP)((function(e){return(0,r.jsx)(o.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){i(e,n,t[n])}))}return e}({},e))}))((function(e){var n=e.theme;return{padding:n.spacing(3),borderRadius:n.spacing(1),backgroundColor:"#fff",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",border:"1px solid ".concat(n.palette.bacap.border)}}));n.Z=a},55688:function(e,n,t){"use strict";var r=t(85893),o=t(67294),i=t(45697),a=t.n(i),l=t(14866),s=t(46901);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=o.forwardRef((function(e,n){return(0,r.jsx)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){c(e,n,t[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function d(e){var n=e.openSnackbar,t=e.message,i=e.severity,a=e.closeHandlerCB,s=void 0===a?function(){}:a,c=(0,o.useState)(n),d=c[0],f=c[1];(0,o.useEffect)((function(){f(n)}),[n]);var p=function(){f(!1),s()};return(0,r.jsx)(l.Z,{open:d,autoHideDuration:3e3,onClose:p,children:(0,r.jsx)(u,{onClose:p,severity:i,sx:{width:"100%"},children:t})})}d.propTypes={openSnackbar:a().bool,message:a().string,severity:a().string},n.Z=d},97040:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return $}});var r=t(85893),o=t(67294),i=t(9473),a=t(95243),l=t(66383),s=t(37647),c=t(47426),u=t(901),d=t(87357),f=t(89646),p=t(15861),m=t(55688),v=t(42176),h=t(6132),g=t(50853),x=t(24343),b=t(11057),y=t(41664),j=t(34051),Z=t.n(j),w=t(50657),C=t(37645),S=t(93946),P=t(6514),_=t(86886),k=t(98456),O=t(61903),N=t(50480),F=t(69368),T=t(53457),D=t(31425),L=t(50594),I=t(13527);function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function M(e,n,t,r,o,i,a){try{var l=e[i](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,o)}function B(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){B(e,n,t[n])}))}return e}function z(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return E(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return E(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=[{id:"prep",order:0,title:"Preparation",desc:"Land preparation",conflict:[],color:"rgb(153, 102, 51)"},{id:"seed",order:1,title:"Seeding",desc:"Seed planting",conflict:[],color:"rgb(202, 237, 251)"},{id:"veg",order:2,title:"Vegetative (General)",desc:"General vegitative",conflict:["vegleaf","vegtass"],color:"rgba(254, 255, 171)"},{id:"vegleaf",order:2,title:"Vegetative (Leaf Stages)",desc:"Leaf growth phase",conflict:["veg"],color:"rgba(254, 255, 171)"},{id:"vegtass",order:3,title:"Vegetative (Tasseling)",desc:"Vegitation tassling",conflict:["veg"],color:"rgba(217, 255, 146)"},{id:"repro",order:4,title:"Reproductive",desc:"Land preparation",conflict:[],color:"rgb(142, 217, 115)"},{id:"mat",order:5,title:"Maturing",desc:"Crop is almost ripe or is ripe for harvest",conflict:[],color:"rgb(60, 125, 34)"},{id:"bud",order:1,title:"Bud Break",desc:"Bud Break",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]},{id:"indev",order:2,title:"Inflorescence Dev./Flowering",desc:"Inflorescence Dev./Flowering",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]},{id:"fset",order:3,title:"Fruit Set",desc:"Fruit Set",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]},{id:"fdev",order:4,title:"Fruit Development",desc:"Fruit Development",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]}];var G=function(e){var n=e.onClose,t=e.onSuccess,i=e.commodityData,a=(0,o.useState)({}),l=a[0],s=a[1],c=(0,o.useState)(!1),u=c[0],f=c[1],v=(0,o.useState)({}),h=v[0],g=v[1],x=(0,o.useState)({docId:null===i||void 0===i?void 0:i.id,tagalog_name:null===i||void 0===i?void 0:i.tagalog_name,ilokano_name:null===i||void 0===i?void 0:i.ilokano_name,phases:[],hasCalendar:(null===i||void 0===i?void 0:i.hasCalendar)||!1}),y=x[0],j=x[1];(0,o.useEffect)((function(){if(null===i||void 0===i?void 0:i.phases){var e=i.phases.split(",").map((function(e){return e.trim()})).filter((function(e){return e.length})).map((function(e){return A.find((function(n){return n.id===e}))})).filter(Boolean);j((function(n){return R({},n,{phases:e})})),g(e)}}),[i]);var E=(0,o.useMemo)((function(){var e={};return A.forEach((function(n){return e[n.id]=new Set})),A.forEach((function(n){n.conflict.forEach((function(t){var r;e[n.id].add(t),null===(r=e[t])||void 0===r||r.add(n.id)}))})),e}),[]),G=function(){j({tagalog_name:null===i||void 0===i?void 0:i.tagalog_name,ilokano_name:null===i||void 0===i?void 0:i.ilokano_name,phases:h})},H=function(e){var n=e.target,t=n.id,r=n.value;j((function(e){return R({},e,B({},t,r))}))},W=function(e){var n=y.phases.map((function(e){return e.id})),t=!0,r=!1,o=void 0;try{for(var i,a=n[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l,s=i.value;if(null===(l=E[s])||void 0===l?void 0:l.has(e))return!0}}catch(c){r=!0,o=c}finally{try{t||null==a.return||a.return()}finally{if(r)throw o}}return!1},V=function(){var e,n=(e=Z().mark((function e(n){var r,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,I.ci)(n);case 3:r=e.sent,s({message:r.message||"Successfully updated commodity.",severity:"success"}),f(!0),G(),setTimeout((function(){f(!1),t()}),1500),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),s({message:(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o?void 0:o.data)||"Failed to add new commodity.",severity:"error"}),f(!0),setTimeout((function(){f(!1)}),2e3);case 16:case"end":return e.stop()}}),e,null,[[0,10]])})),function(){var n=this,t=arguments;return new Promise((function(r,o){var i=e.apply(n,t);function a(e){M(i,r,o,a,l,"next",e)}function l(e){M(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}(),U=JSON.stringify(h)!==JSON.stringify(y.phases),$=(null===i||void 0===i?void 0:i.tagalog_name)!==(null===y||void 0===y?void 0:y.tagalog_name)||(null===i||void 0===i?void 0:i.ilokano_name)!==(null===y||void 0===y?void 0:y.ilokano_name)||(null===i||void 0===i?void 0:i.hasCalendar)!==(null===y||void 0===y?void 0:y.hasCalendar)||U;return i?(0,r.jsxs)(w.Z,{open:!0,children:[(0,r.jsx)(C.Z,{children:(0,r.jsx)(d.Z,{children:(0,r.jsxs)(p.Z,{variant:"h5",children:["Updating Commodity: ",null===i||void 0===i?void 0:i.name]})})}),(0,r.jsx)(S.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8},children:(0,r.jsx)(L.Z,{})}),(0,r.jsx)(P.Z,{divider:!0,children:(0,r.jsxs)(_.ZP,{container:!0,gap:2,sx:{minWidth:"64vh",minHeight:"60vh"},children:[(0,r.jsxs)(_.ZP,{size:2,children:[(0,r.jsx)(p.Z,{variant:"h6",children:"Commodity Information"}),(0,r.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,r.jsx)(O.Z,{id:"name",size:"small",label:"Crop Name",value:(null===i||void 0===i?void 0:i.name)||"",fullWidth:!0,margin:"dense",InputProps:{readOnly:!0}}),(0,r.jsx)(O.Z,{id:"tagalog_name",size:"small",label:"Tagalog Name",value:(null===y||void 0===y?void 0:y.tagalog_name)||"",onChange:H,fullWidth:!0,margin:"dense"}),(0,r.jsx)(O.Z,{id:"ilokano_name",size:"small",label:"Iloko Name",value:(null===y||void 0===y?void 0:y.ilokano_name)||"",onChange:H,fullWidth:!0,margin:"dense"})]}),(0,r.jsx)(N.Z,{control:(0,r.jsx)(F.Z,{checked:y.hasCalendar,onChange:function(e){return n=e.target.checked,void j((function(e){return R({},e,{hasCalendar:n})}));var n}}),label:"Include in Crop Calendar Management"}),(0,r.jsx)(T.Z,{sx:{borderTop:"2px dotted #8290be"},children:A.map((function(e){var n=y.phases.some((function(n){return n.id===e.id}));return(0,r.jsx)(N.Z,{control:(0,r.jsx)(F.Z,{checked:n,onChange:function(n){return function(e,n){var t=e.target.checked;j((function(e){var r=z(e.phases);return t?r.push(n):r=r.filter((function(e){return e.id!==n.id})),r.sort((function(e,n){return e.order-n.order})),R({},e,{phases:r})}))}(n,e)},disabled:!n&&W(e.id)}),label:e.title,size:"small",sx:{display:!n&&W(e.id)?"none":"flex"}},e.id)}))})]}),(0,r.jsx)(_.ZP,{size:8,children:(0,r.jsxs)(d.Z,{sx:{minWidth:"100%",pl:{xs:0,lg:2}},children:[(0,r.jsx)(p.Z,{variant:"h6",children:"Summary"}),(0,r.jsx)(d.Z,{sx:R({border:"1px solid #DCEDC8",borderRadius:1,display:"grid",placeContent:"left",padding:"20px",mt:1},(null===i||void 0===i?void 0:i.name)&&{minHeight:"150px",my:1,minWidth:"100%"},{"& h6":{lineHeight:"20px"}}),children:y.tagalog_name||y.ilokano_name||0!==y.phases.length?(0,r.jsxs)(d.Z,{sx:{minWidth:"64vh"},children:[(0,r.jsx)("div",{children:y.hasCalendar?(0,r.jsxs)(p.Z,{variant:"body2",fontSize:12,sx:{fontStyle:"italic"},children:["This Commodity is ",(0,r.jsx)("strong",{children:"included"})," in the Crop Calendar"]}):(0,r.jsxs)(p.Z,{variant:"body2",fontSize:12,sx:{fontStyle:"italic"},children:["This Commodity is ",(0,r.jsx)("strong",{children:"excluded"})," from the Crop Calendar"]})}),(0,r.jsxs)(p.Z,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Crop Name: "}),null===i||void 0===i?void 0:i.name]}),(0,r.jsxs)(p.Z,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Tagalog Name: "}),y.tagalog_name]}),(0,r.jsxs)(p.Z,{variant:"body2",children:[(0,r.jsx)("strong",{children:"Iloko Name: "}),y.ilokano_name]}),(0,r.jsx)(p.Z,{variant:"subtitle2",sx:{mt:1},children:"Phases Selected:"}),0===y.phases.length&&(0,r.jsx)(p.Z,{variant:"body2",children:"Please select all phases that applies"}),y.phases.map((function(e){return(0,r.jsxs)(p.Z,{variant:"body2",children:[e.title," \u2013 ",e.desc]},e.id)}))]}):(0,r.jsx)(p.Z,{variant:"subtitle2",children:"Please enter a value to start."})})]})})]})}),(0,r.jsxs)(D.Z,{variant:"text",color:"primary",size:"small","aria-label":"outlined button controls group",children:[(0,r.jsx)(b.Z,{variant:"outlined",color:"error",onClick:G,children:"Reset"}),(0,r.jsx)(b.Z,{color:"primary",onClick:function(){V(y)},disabled:!$||y.phases.length<=4,children:"Update"})]}),u&&(0,r.jsx)(m.Z,{openSnackbar:!0,message:l.message,severity:l.severity,closeHandler:function(){f(!1)}})]}):(0,r.jsxs)(w.Z,{open:!0,children:[(0,r.jsx)(C.Z,{children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(p.Z,{variant:"h5",children:"Update Commodity "})})}),(0,r.jsx)(S.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8},children:(0,r.jsx)(L.Z,{})}),(0,r.jsx)(P.Z,{divider:"true",children:(0,r.jsx)(_.ZP,{container:!0,sx:{minWidth:"75vh",minHeight:"60vh"},gap:2,children:(0,r.jsx)(_.ZP,{container:!0,spacing:1,direction:"row",justifyContent:"center",alignItems:"center",alignContent:"center",wrap:"wrap",children:(0,r.jsx)(k.Z,{})})})})]})};function H(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function W(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){H(e,n,t[n])}))}return e}function V(e){return(0,r.jsx)(d.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,r.jsxs)(v.D,W({},e,{children:[(0,r.jsx)(h.S,{}),(0,r.jsx)(g.M,{})]}))})}var U=function(e){var n=e.rows,t=e.columns,a=e.message,l=e.resetMessage,s=e.onRefresh,c=(0,i.v9)((function(e){return e.crops.status})),v=(0,o.useState)(null),h=v[0],g=v[1],j=(0,o.useState)(!1),Z=j[0],w=j[1];return(0,r.jsxs)("div",{children:[(0,r.jsx)(m.Z,{openSnackbar:""!==a,message:a,severity:"info",closeHandlerCB:l}),(0,r.jsx)(p.Z,{variant:"h5",children:"Commodities List"}),(0,r.jsxs)("p",{children:["Manage ",(0,r.jsx)("strong",{children:"commodities"}),". The list will be used as options for the cropping calendar."]}),(0,r.jsx)(f.Z,{sx:{display:"flex",flexDirection:{sm:"column",md:"row"},justifyContent:"space-between",alignItems:"center",padding:"8px 16px 8px 24px"},children:(0,r.jsx)(y.default,{href:"/admin/commodities/create",passHref:!0,children:(0,r.jsx)(b.Z,{variant:"contained",color:"primary",children:"New Commodity"})})}),(0,r.jsx)(d.Z,{style:{height:678,width:"100%",textAlign:"left"},children:(0,r.jsx)(f.Z,{sx:{height:"inherit",marginTop:"16px"},children:(0,r.jsx)(x._,{rows:n.length>0?n:[],columns:t,disableDensitySelector:!0,pageSize:10,rowsPerPageOptions:[10],components:{Toolbar:V},loading:c===u.G.PENDING,rowHeight:48,onRowClick:function(e){return function(e){if(e.id){var t=e.id,r=n.find((function(e){return e.id===t}));g(r),w(!0)}else g(null),w(!1)}(e)},initialState:{columns:{columnVisibilityModel:{rowId:!1}}}})})}),Z&&(0,r.jsx)(G,{commodityData:h,onClose:function(){return w(!1)},onSuccess:function(){w(!1),s()}})]})};var $=(0,a.Z)((function(e){var n=(0,o.useState)([]),t=n[0],a=n[1],d=(0,o.useState)([]),f=d[0],p=d[1],v=(0,o.useState)(""),h=v[0],g=v[1],x=(0,o.useRef)(!1),b=(0,i.I0)(),y=(0,o.useState)(!1),j=y[0],Z=y[1],w=(0,o.useState)({}),C=w[0],S=w[1],P=(0,o.useState)(!1),_=P[0],k=P[1],O=(0,i.v9)((function(e){return e.crops})),N=O.ids,F=O.entities,T=O.status;return(0,o.useEffect)((function(){return x.current=!0,function(){x.current=!1}}),[]),(0,o.useEffect)((function(){if([u.G.FULLFILLED,u.G.IDLE].includes(T)&&N.length>0){var e={name:"Crop Name",tagalog_name:"Tagalog Name",ilokano_name:"Ilokano Name",phases:"Crop Phases",updated_by:"Updated by",created_at:"Created at"},n={name:160,tagalog_name:150,ilokano_name:150,phases:230,updated_by:200,created_at:196},t=[];["name","tagalog_name","ilokano_name","phases","updated_by","created_at"].forEach((function(r){t.push({field:r,headerName:e[r],minWidth:n[r],flex:void 0===n[r]?1:0,editable:!1,sortable:!1,disableColumnMenu:!0})}));var r=N.map((function(e){return{id:F[e].id,name:F[e].name,tagalog_name:F[e].tagalog_name||"-",ilokano_name:F[e].ilokano_name||"-",hasCalendar:F[e].hasCalendar||!1,phases:F[e].phases.map((function(e){return e.id})).join(", "),updated_by:F[e].updated_by||"N/A",created_at:F[e].created_at||"N/A"}}));x.current&&(a(r),p(t))}}),[T,N,F]),(0,o.useEffect)((function(){b((0,s.lR)()).unwrap().then((function(e){!function(e){e.length>0?S({message:"Successfully fetched ".concat(e.length," commodities."),severity:"info"}):S({message:"No commodities available.",severity:"info"})}(e)})).catch((function(e){console.error("Error fetching commodities:",e),g("Failed to fetch commodities.")}))}),[_,b]),(0,r.jsxs)(l.Z,{loading:e.loading,user:e.user,onBtnLogoutClick:e.onBtnLogoutClick,accLevel:c.DW.ADMIN,children:[(0,r.jsx)(U,{rows:t,columns:f,loadingCrops:T===u.G.PENDING,message:h,resetMessage:function(){return g("")},onRefresh:function(){return k((function(e){return!e}))}}),!T&&j&&(0,r.jsx)(m.Z,{openSnackbar:!0,message:C.message,severity:C.severity,closeHandler:function(){Z(!1)}})]})}))}},function(e){e.O(0,[5778,2702,8858,8333,6223,6279,4597,7944,7067,1433,4343,1050,9774,2888,179],(function(){return n=69185,e(e.s=n);var n}));var n=e.O();_N_E=n}]);