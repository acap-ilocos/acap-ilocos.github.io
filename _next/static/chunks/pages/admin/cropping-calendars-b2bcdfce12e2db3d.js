(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3807],{95976:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/cropping-calendars",function(){return t(61781)}])},61781:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return N}});var r=t(85893),a=t(95243),i=t(66383),l=t(34051),s=t.n(l),o=t(67294),c=t(9473),u=t(15861),d=t(86886),p=t(40044),x=t(88409),h=t(87357),f=t(47312),m=t(18972),b=t(94054),v=t(18360),g=t(38881),j=t(901),y=t(26660),Z=t(93278),w={button:{color:"#FFFFFF",textTransform:"capitalize",fontSize:"14px",fontStyle:"normal",fontWeight:"normal",width:"80px",height:{xs:"40px",sm:"48px"}},container:{padding:"24px",width:"100%",position:"relative",minWidth:"0px",overflowWrap:"break-word",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px",borderRadius:"16px",margin:"auto",borderColor:"#E2E8F0"},tabsContainer:{marginTop:function(e){return e.spacing(8)},border:function(e){return"1px solid ".concat(e.palette.bacap.border)},minHeight:"800px",borderRadius:"8px",background:"#FFFFFF",boxShadow:"rgb(0 0 0 / 2%) 0px 3.5px 5.5px"},customizedButtonLink:{cursor:"pointer",color:"#8BC24A",textDecoration:"underline",fontWeight:600},subheader:{marginBottom:function(e){return e.spacing(3)},maxWidth:"800px",color:"gray","& a":{textDecoration:"none",color:function(e){return e.palette.green.dark}},"& a:hover":{textDecoration:"underline"},"& a:visited":{color:function(e){return e.palette.green.dark}}}},C=t(37647),P=t(71720),S=t(16327),_=t(55688);function k(e,n,t,r,a,i,l){try{var s=e[i](l),o=s.value}catch(c){return void t(c)}s.done?n(o):Promise.resolve(o).then(r,a)}function F(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var i=e.apply(n,t);function l(e){k(i,r,a,l,s,"next",e)}function s(e){k(i,r,a,l,s,"throw",e)}l(void 0)}))}}function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){E(e,n,t[n])}))}return e}function D(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var T=function(){var e=function(e){var n=e.children,t=e.value,a=e.index,i=D(e,["children","value","index"]);return(0,r.jsx)("div",O({role:"tabpanel",hidden:t!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i,{children:t===a&&(0,r.jsx)(h.Z,{sx:{py:3},children:n})}))},n=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},t=(0,c.I0)(),a=(0,o.useState)([]),i=a[0],l=a[1],k=(0,o.useState)(""),E=k[0],T=k[1],W=(0,o.useState)([]),N=W[0],B=W[1],I=(0,o.useState)(0),L=I[0],A=I[1],H=(0,o.useState)(""),z=H[0],M=H[1],U=(0,o.useState)(null),R=U[0],G=U[1],X=(0,o.useState)(""),V=X[0],$=X[1],q=(0,o.useState)([]),J=q[0],K=q[1],Q=(0,o.useState)({}),Y=Q[0],ee=Q[1],ne=(0,o.useState)(!1),te=ne[0],re=ne[1],ae=(0,o.useState)([]),ie=ae[0],le=ae[1],se=(0,o.useState)([]),oe=se[0],ce=se[1];(0,o.useEffect)((function(){var e=function(){var e=F(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.$m)();case 2:n=e.sent,le(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,o.useEffect)((function(){t((0,C.l)()).unwrap().then((function(e){e.length>0&&(B(e),ee({message:"Commodities fetched successfully",severity:"info"}),re(!0))})).catch((function(e){ee({message:null===e||void 0===e?void 0:e.message,severity:"error"}),re(!0),setTimeout((function(){ee({message:"",severity:""})}),3e3)}))}),[t]);var ue=(0,c.v9)((function(e){return e.seasonalweather.status})),de=function(){var e=F(s().mark((function e(n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=F(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.c)(n,E);case 3:t(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n,t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){z&&N.find((function(e){e.name===z&&K(e.phases)}))}),[z,N]),(0,r.jsxs)(h.Z,{sx:{height:"auto"},children:[(0,r.jsx)(u.Z,{variant:"h5",children:"Cropping Calendar Management"}),(0,r.jsxs)(h.Z,{sx:{width:"100%"},children:[(0,r.jsx)(h.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(x.Z,{value:L,onChange:function(e,n){A(n)},"aria-label":"basic tabs example",children:[(0,r.jsx)(p.Z,O({label:"UI CALENDAR"},n(0))),(0,r.jsx)(p.Z,O({label:"EXCEL UPLOAD"},n(1)))]})}),(0,r.jsx)(e,{value:L,index:0,children:R&&""!==V?(0,r.jsx)(h.Z,{children:(0,r.jsx)(P.Z,{phases:J,commodityData:R,province:V,municipalityGroup:oe,onClearParams:function(){M(""),$(""),G(null)}})}):(0,r.jsxs)(h.Z,{sx:{textAlign:"start",minHeight:"60vh",maxHeight:"60vh"},children:[(0,r.jsxs)(u.Z,{children:[" ",(0,r.jsx)("strong",{children:"Manage cropping calendars"})," using a drag-and-drop styled interface."]}),(0,r.jsx)(u.Z,{sx:{py:2},variant:"subtitle2",children:"please select a commodity and a province to continue"}),(0,r.jsxs)(d.ZP,{sx:{display:"flex",gap:2},children:[(0,r.jsx)(h.Z,{sx:{width:"25%"},children:(0,r.jsxs)(b.Z,{fullWidth:!0,size:"small",children:[(0,r.jsx)(f.Z,{id:"demo-simple-select-label",children:"Commodity"}),(0,r.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:z,label:"Crop Type",onChange:function(e){var n=e.target.value;M(n),N.find((function(e){e.name===n&&(G(e),K(e.phases))}))},children:N.map((function(e){return(0,r.jsxs)(m.Z,{value:e.name,children:[e.name,e.tagalog_name?" / ".concat(e.tagalog_name):""]},e.name)}))})]})}),(0,r.jsx)(h.Z,{sx:{width:"25%"},children:(0,r.jsxs)(b.Z,{fullWidth:!0,size:"small",disabled:!z,children:[(0,r.jsx)(f.Z,{id:"demo-simple-select-label",children:"Province"}),(0,r.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:V,label:"Province",onChange:function(e){var n=ie.find((function(n){return n.label===e.target.value}));ce((null===n||void 0===n?void 0:n.municipalities)||[]),$(e.target.value)},children:ie.map((function(e){return(0,r.jsx)(m.Z,{value:e.label,children:e.label},e.label)}))})]})})]})]})}),(0,r.jsx)(e,{value:L,index:1,children:(0,r.jsxs)(h.Z,{sx:{minHeight:"60vh",maxHeight:"60vh"},children:[(0,r.jsxs)(u.Z,{children:[" ",(0,r.jsx)("strong",{children:"Manage cropping calendars"})," by uploading Excel-formatted templates."]}),(0,r.jsxs)("p",{children:["Before uploading cropping calendars with data, ",(0,r.jsx)("strong",{children:"first download the template"})," of the respective crop you will add into the system."]}),(0,r.jsxs)(d.ZP,{container:!0,spacing:2,children:[(0,r.jsxs)(d.ZP,{item:!0,xs:12,md:6,children:[(0,r.jsx)(u.Z,{variant:"h6",children:"List of Crop Types and their Templates"}),(0,r.jsx)("br",{}),(0,r.jsxs)(u.Z,{variant:"body2",sx:w.subheader,children:[(0,r.jsx)("a",{href:(0,y.assetPrefixer)("files/".concat("rice_cropping_calendar.xlsx")),target:"__blank",children:"[Rice Cropping Calendar Excel template]"}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:(0,y.assetPrefixer)("files/".concat("corn_cropping_calendar.xlsx")),target:"__blank",children:"[Corn Cropping Calendar Excel template]"})]})]}),(0,r.jsxs)(d.ZP,{item:!0,xs:12,md:6,children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Upload Cropping Calendar"})}),(0,r.jsx)(h.Z,{sx:{minWidth:120},children:(0,r.jsxs)(b.Z,{fullWidth:!0,children:[(0,r.jsx)(f.Z,{id:"demo-simple-select-label",children:"Crop Type"}),(0,r.jsx)(v.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:E,label:"Crop Type",onChange:function(e){T(e.target.value)},children:N.map((function(e){return(0,r.jsx)(m.Z,{value:e.name,children:e.name},e.name)}))})]})}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.ZP,{item:!0,xs:12,children:[(0,r.jsx)(Z.Z,{label:"Upload an excel file",name:"excelfile",fileAccepts:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",isDisabled:ue===j.G.PENDING||!E,fileUploadMethod:de,onFileSelectedCB:function(e){e||l(i.map((function(e){return O({},e,{isValid:!1,value:""})})))}}),(0,r.jsxs)(u.Z,{variant:"caption",children:["Please select ",(0,r.jsx)("strong",{children:"Crop Type"})," first before uploading a file."]})]})]})]})]})}),te&&(0,r.jsx)(_.Z,{openSnackbar:!0,message:Y.message,severity:Y.severity,closeHandler:function(){re(!1)}})]})]})},W=t(47426);var N=(0,a.Z)((function(e){var n=e.loading,t=e.user,a=e.onBtnLogoutClick;return(0,r.jsx)(i.Z,{loading:n,user:t,onBtnLogoutClick:a,accLevel:W.DW.ADMIN,children:(0,r.jsx)(T,{})})}))}},function(e){e.O(0,[5778,2702,8858,8333,6223,6279,8611,7944,1433,6572,4639,9850,1050,3278,1720,9774,2888,179],(function(){return n=95976,e(e.s=n);var n}));var n=e.O();_N_E=n}]);