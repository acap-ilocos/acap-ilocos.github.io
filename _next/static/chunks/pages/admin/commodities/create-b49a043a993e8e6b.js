(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4397],{96188:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/commodities/create",function(){return r(48082)}])},55688:function(e,n,r){"use strict";var t=r(85893),i=r(67294),a=r(45697),o=r.n(a),s=r(14866),l=r(46901);function c(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var d=i.forwardRef((function(e,n){return(0,t.jsx)(l.Z,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){c(e,n,r[n])}))}return e}({elevation:6,ref:n,variant:"filled"},e))}));function u(e){var n=e.openSnackbar,r=e.message,a=e.severity,o=e.closeHandlerCB,l=void 0===o?function(){}:o,c=(0,i.useState)(n),u=c[0],h=c[1];(0,i.useEffect)((function(){h(n)}),[n]);var f=function(){h(!1),l()};return(0,t.jsx)(s.Z,{open:u,autoHideDuration:3e3,onClose:f,children:(0,t.jsx)(d,{onClose:f,severity:a,sx:{width:"100%"},children:r})})}u.propTypes={openSnackbar:o().bool,message:o().string,severity:o().string},n.Z=u},48082:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return z}});var t=r(34051),i=r.n(t),a=r(85893),o=r(67294),s=r(66383),l=r(95243),c=r(86886),d=r(87357),u=r(15861),h=r(93946),f=r(61903),g=r(50480),v=r(69368),m=r(53457),p=r(56863),x=r(11057),j=r(50657),b=r(37645),y=r(6514),Z=r(31425),C={selectionSummary:{minWidth:"100%",paddingLeft:{xs:0,lg:"16px"}},welcome:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},display:"grid",placeContent:"left",padding:"20px",marginTop:function(e){return e.spacing(1)},"& h6":{lineHeight:"20px"}},summary:{border:"1px solid #DCEDC8",borderRadius:function(e){return e.spacing(1)},marginTop:function(e){return e.spacing(1)},padding:function(e){return e.spacing(3)}}},w=r(94669),S=r(47426),k=r(41664),_=r(13527),P=r(55688);function O(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function T(e,n,r,t,i,a,o){try{var s=e[a](o),l=s.value}catch(c){return void r(c)}s.done?n(l):Promise.resolve(l).then(t,i)}function N(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function D(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){N(e,n,r[n])}))}return e}function E(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return O(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=[{id:"prep",order:0,title:"Preparation",desc:"Land preparation",conflict:[],color:"rgb(153, 102, 51)"},{id:"seed",order:1,title:"Seeding",desc:"Seed planting",conflict:[],color:"rgb(202, 237, 251)"},{id:"veg",order:2,title:"Vegetative (General)",desc:"General vegitative",conflict:["vegleaf","vegtass"],color:"rgba(254, 255, 171)"},{id:"vegleaf",order:2,title:"Vegetative (Leaf Stages)",desc:"Leaf growth phase",conflict:["veg"],color:"rgba(254, 255, 171)"},{id:"vegtass",order:3,title:"Vegetative (Tasseling)",desc:"Vegitation tassling",conflict:["veg"],color:"rgba(217, 255, 146)"},{id:"repro",order:4,title:"Reproductive",desc:"Land preparation",conflict:[],color:"rgb(142, 217, 115)"},{id:"mat",order:5,title:"Maturing",desc:"Crop is almost ripe or is ripe for harvest",conflict:[],color:"rgb(60, 125, 34)"},{id:"bud",order:1,title:"Bud Break",desc:"Bud Break",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]},{id:"indev",order:2,title:"Inflorescence Dev./Flowering",desc:"Inflorescence Dev./Flowering",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]},{id:"fset",order:3,title:"Fruit Set",desc:"Fruit Set",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]},{id:"fdev",order:4,title:"Fruit Development",desc:"Fruit Development",conflict:["prep","seed","veg","vegleaf","vegtass","repro"]}];var z=(0,l.Z)((function(e){var n=e.user,r=e.onBtnLogoutClick,t=e.loading,l=(0,o.useState)({}),O=l[0],z=l[1],L=(0,o.useState)(!1),A=L[0],F=L[1],B=(0,o.useState)(!1),H=B[0],M=B[1],W=(0,o.useState)({name:"",tagalog_name:"",iloko_name:"",phases:[],hasCalendar:!1}),R=W[0],V=W[1],G=function(){V({name:"",tagalog_name:"",iloko_name:"",phases:[],hasCalendar:!1})},J=(0,o.useMemo)((function(){var e={};return I.forEach((function(n){return e[n.id]=new Set})),I.forEach((function(n){n.conflict.forEach((function(r){var t;e[n.id].add(r),null===(t=e[r])||void 0===t||t.add(n.id)}))})),e}),[]),X=function(e){var n=e.target,r=n.id,t=n.value;V((function(e){return D({},e,N({},r,t))}))},q=function(e){var n=R.phases.map((function(e){return e.id})),r=!0,t=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s,l=a.value;if(null===(s=J[l])||void 0===s?void 0:s.has(e))return!0}}catch(c){t=!0,i=c}finally{try{r||null==o.return||o.return()}finally{if(t)throw i}}return!1},U=(0,o.useState)(!1),Y=U[0],$=U[1],K=function(){var e,n=(e=i().mark((function e(n){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),e.prev=1,e.next=4,(0,_.JJ)(n);case 4:r=e.sent,z({message:null===r||void 0===r?void 0:r.message,severity:"success"}),F(!0),G(),setTimeout((function(){F(!1),window.location.href="/admin/commodities"}),2e3),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(1),z({message:(null===e.t0||void 0===e.t0||null===(t=e.t0.response)||void 0===t?void 0:t.data)||"Failed to add new commodity.",severity:"error"}),F(!0),setTimeout((function(){F(!1)}),2e3);case 17:case"end":return e.stop()}}),e,null,[[1,11]])})),function(){var n=this,r=arguments;return new Promise((function(t,i){var a=e.apply(n,r);function o(e){T(a,t,i,o,s,"next",e)}function s(e){T(a,t,i,o,s,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return(0,a.jsxs)(s.Z,{loading:t,user:n,onBtnLogoutClick:r,accLevel:S.DW.ADMIN,children:[(0,a.jsxs)(c.ZP,{container:!0,sx:C.container,gap:2,children:[(0,a.jsxs)(d.Z,{sx:C.headerText,children:[(0,a.jsxs)(d.Z,{children:[(0,a.jsx)(u.Z,{variant:"h5",children:"Create Commodity"}),(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:"Create a commodity to be included in the cropping calendar. Once saved, it will show up as an option at the cropping calendar."}})]}),(0,a.jsx)(d.Z,{children:(0,a.jsx)(h.Z,{"aria-label":"exit",size:"medium",children:(0,a.jsx)(k.default,{href:"/admin/commodities",passHref:!0,children:(0,a.jsx)(w.Z,{fontSize:"inherit"})})})})]}),(0,a.jsxs)(c.ZP,{size:4,children:[(0,a.jsx)(u.Z,{variant:"h6",children:"Commodity Information"}),(0,a.jsxs)(d.Z,{gap:2,children:[(0,a.jsx)(f.Z,{id:"name",size:"small",label:"Crop Name",value:(null===R||void 0===R?void 0:R.name)||"",onChange:X,required:!0,fullWidth:!0,margin:"dense"}),(0,a.jsx)(f.Z,{id:"tagalog_name",size:"small",label:"Tagalog Name",value:(null===R||void 0===R?void 0:R.tagalog_name)||"",onChange:X,fullWidth:!0,margin:"dense"}),(0,a.jsx)(f.Z,{id:"iloko_name",size:"small",label:"Iloko Name",value:(null===R||void 0===R?void 0:R.iloko_name)||"",onChange:X,fullWidth:!0,margin:"dense"})]}),(0,a.jsx)(g.Z,{control:(0,a.jsx)(v.Z,{checked:R.hasCalendar,onChange:function(e){return n=e.target.checked,void V((function(e){return D({},e,{hasCalendar:n})}));var n}}),label:"Include in Crop Calendar Management"}),(0,a.jsxs)(m.Z,{sx:{borderTop:"2px dotted #8290be"},children:[(0,a.jsx)(u.Z,{variant:"h6",children:"Crop Stages"}),I.map((function(e){var n=R.phases.some((function(n){return n.id===e.id}));return(0,a.jsx)(g.Z,{control:(0,a.jsx)(v.Z,{checked:n,onChange:function(n){return function(e,n){var r=e.target.checked;V((function(e){var t=E(e.phases);return r?t.push(n):t=t.filter((function(e){return e.id!==n.id})),t.sort((function(e,n){return e.order-n.order})),D({},e,{phases:t})}))}(n,e)},disabled:!n&&q(e.id)}),label:e.title,size:"small",sx:{display:!n&&q(e.id)?"none":""}},e.id)}))]})]}),(0,a.jsx)(c.ZP,{size:8,children:(0,a.jsxs)(d.Z,{sx:C.selectionSummary,children:[(0,a.jsx)(u.Z,{variant:"h6",children:"Summary"}),(0,a.jsx)(d.Z,{sx:D({},C.welcome,null!=R.name&&{minHeight:"150px",marginY:1,minWidth:"100%"}),children:R.name||R.tagalog_name||R.iloko_name||R.hasCalendar||0!==R.phases.length?(0,a.jsxs)(d.Z,{children:[(0,a.jsx)("div",{children:R.hasCalendar?(0,a.jsxs)(u.Z,{variant:"body2",fontSize:12,sx:{fontStyle:"italic"},children:["This Commodity is ",(0,a.jsx)("strong",{children:"included"})," in the Crop Calendar"]}):(0,a.jsxs)(u.Z,{variant:"body2",fontSize:12,sx:{fontStyle:"italic"},children:["This Commodity is ",(0,a.jsx)("strong",{children:"excluded"})," from the Crop Calendar"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[(0,a.jsx)("strong",{children:"Crop Name:"})," ",R.name]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[(0,a.jsx)("strong",{children:"Tagalog Name:"})," ",R.tagalog_name]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[(0,a.jsx)("strong",{children:"Ilokano Name:"})," ",R.iloko_name]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(u.Z,{variant:"subtitle2",children:"Stages Selected:"}),0===R.phases.length&&(0,a.jsx)(u.Z,{variant:"body2",children:"Please select all that applies"}),R.phases.map((function(e){return(0,a.jsx)(c.ZP,{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[e.title," - ",e.desc]})},e.id)}))]})]}):(0,a.jsx)(d.Z,{children:(0,a.jsx)(u.Z,{variant:"subtitle2",children:"Please enter a value to start."})})}),(0,a.jsxs)(p.Z,{variant:"text",color:"primary",size:"small","aria-label":"outlined button controls group",children:[(0,a.jsx)(x.Z,{variant:"outlined",color:"primary",onClick:G,children:"Reset"}),(0,a.jsx)(x.Z,{variant:"outlined",color:"primary",onClick:function(){return M(!0)},disabled:null===R.name||""===R.name||R.phases.length<=4,children:" Save "})]})]})})]}),A&&(0,a.jsx)(P.Z,{openSnackbar:!0,message:O.message,severity:O.severity,closeHandler:function(){F(!1)}}),H&&(0,a.jsxs)(j.Z,{open:H,onClose:function(){return M(!1)},children:[(0,a.jsx)(b.Z,{id:"alert-dialog-title",children:"Do you want to save this crop with the following information?"}),(0,a.jsx)(y.Z,{children:(0,a.jsxs)(d.Z,{children:[(0,a.jsx)("div",{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[(0,a.jsx)("strong",{children:"Crop Name:"})," ",R.name]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[(0,a.jsx)("strong",{children:"Tagalog Name:"})," ",R.tagalog_name||"none"]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[(0,a.jsx)("strong",{children:"Ilokano Name:"})," ",R.iloko_name||"none"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(u.Z,{variant:"subtitle2",children:"Phases Selected:"}),0===R.phases.length&&(0,a.jsx)(u.Z,{variant:"body2",children:"Please select all that applies"}),R.phases.map((function(e){return(0,a.jsx)(c.ZP,{children:(0,a.jsxs)(u.Z,{variant:"body2",children:[e.title," - ",e.desc]})},e.id)}))]})]})}),(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(x.Z,{onClick:function(){return M(!1)},children:"Cancel"}),(0,a.jsx)(x.Z,{onClick:function(){K({id:R.name.toLowerCase().trim().replace(/\s+/g,"_"),name:R.name,tagalog_name:R.tagalog_name,ilokano_name:R.iloko_name,phases:R.phases})},autoFocus:!0,disabled:Y,children:"Confirm"})]})]})]})}))}},function(e){e.O(0,[5778,2702,8858,8333,6223,6279,4597,7944,1433,4938,1050,9774,2888,179],(function(){return n=96188,e(e.s=n);var n}));var n=e.O();_N_E=n}]);